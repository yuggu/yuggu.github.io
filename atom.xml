<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>yuggu</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yuggu.github.io/"/>
  <updated>2019-10-08T03:24:46.101Z</updated>
  <id>https://yuggu.github.io/</id>
  
  <author>
    <name>yuggu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>DES(数据加密标准)</title>
    <link href="https://yuggu.github.io/2019/10/08/DES-%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86%E6%A0%87%E5%87%86/"/>
    <id>https://yuggu.github.io/2019/10/08/DES-数据加密标准/</id>
    <published>2019-10-08T03:15:23.000Z</published>
    <updated>2019-10-08T03:24:46.101Z</updated>
    
    <content type="html"><![CDATA[<h2 id="des-数据加密标准">DES( 数据加密标准)</h2><h3 id="des">DES</h3><p>  <span class="math inline">\(\text{DES}\)</span>是一种数据加密标准，是一种对称加密算法，<span class="math inline">\(\text{DES}\)</span>算法的入口参数有三个：<span class="math inline">\(\text{Key、Date、Mode}\)</span>。其中<span class="math inline">\(\text{Key}\)</span>为8个字节共64位，是<span class="math inline">\(\text{DES}\)</span>算法的工作密钥；<span class="math inline">\(\text{Date}\)</span>也为8个字节64位，是要被加密或解密的数据；<span class="math inline">\(\text{Mode}\)</span>为<span class="math inline">\(\text{DES}\)</span>的工作方式，有两种：加密或解密。</p><p>  <span class="math inline">\(\text{DES}\)</span>算法是这样工作的：若<span class="math inline">\(\text{Mode}\)</span>为加密，则用<span class="math inline">\(\text{Key}\)</span>去把数据<span class="math inline">\(\text{Date}\)</span>进行加密，生成<span class="math inline">\(\text{Date}\)</span>的密码形式（64位）作为<span class="math inline">\(\text{DES}的输出结果；若\)</span>为解密，则用<span class="math inline">\(\text{Key}\)</span>去把密码形式的数据<span class="math inline">\(\text{Data}\)</span>解密，还原为<span class="math inline">\(\text{Date}\)</span>的明码形式（64位）作为<span class="math inline">\(\text{DES}\)</span>的输出结果。在通信网络的两端，双方约定一致的<span class="math inline">\(\text{Key}\)</span>，在通信的源点用<span class="math inline">\(\text{Key}\)</span>对核心数据进行<span class="math inline">\(\text{DES}\)</span>加密，然后以密码形式在公共通信网（如电话网）中传输到通信网络的终点，数据到达目的地后，用同样的<span class="math inline">\(\text{Key}\)</span>对密码数据进行解密，便再现了明码形式的核心数据。这样，便保证了核心数据（如<span class="math inline">\(\text{PIN、MAC}\)</span>等）在公共通信网中传输的安全性和可靠性。</p><a id="more"></a><h3 id="des加密算法">DES加密算法</h3><p>  下面的图表示了<span class="math inline">\(\text{DES}\)</span>加密的整个机制，对于任意加密方案，总有两个输入：明文和密钥。<span class="math inline">\(\text{DES}\)</span>的明文长为64位，密钥长为56位（实际上是64位，其余8位可以奇偶校验或随意设置）。</p><p>  由图左部分可知，明文的处理经过了三个阶段，首先64位的明文经过初始置换IP而重新排列。然后进行16轮相同函数的作用，每轮作用都有置换和替换，最后一轮迭代的输出有64位；图的右半部分给出了使用56位密钥的过程，首先，密钥经过一个置换，在经过循环左移和一个置换就得到了各轮的子密钥<span class="math inline">\(K_i\)</span>，每轮的置换函数都一样，但是由于密钥的循环左移，使得每轮的子密钥互不相同。</p><p><img src="/images/des_2.png" width="550px"></p><h4 id="获取子密钥k_i">获取子密钥<span class="math inline">\(K_i\)</span></h4><p>  <span class="math inline">\(\text{DES}\)</span>的初始密钥<span class="math inline">\(\text{K}\)</span>为64位，按8行8列从左往右从上往下，其中每行第8位用于奇偶校验（即<span class="math inline">\(K\)</span>的第8、16、24、32、40、48、56、64共8个校验），因此初始密钥<span class="math inline">\(K\)</span>实际可用56位，之后通过<span class="math inline">\(\text{PC-1}\)</span>置换函数进行置换，<span class="math inline">\(\text{PC-1}\)</span>函数置换表如图，即将初始密钥<span class="math inline">\(\text{K}\)</span>的第57位（这里的位数，将校验位也计算在内）放在第1位，第49位放在第2位，依次类推；</p><p><img src="/images/des_3.png" width="450px"></p><p>  经过<span class="math inline">\(\text{PC-1}\)</span>置换，得到的置换输出是56位的，将它的前28位作为<span class="math inline">\(C_0\)</span>，后28位作为<span class="math inline">\(D_0\)</span>，之后<span class="math inline">\(C_0、D_0\)</span>分别<strong>循环左移</strong>1位得到<span class="math inline">\(C_1、D_1\)</span>，然后将两部分合成56位，在将这个56位的结果通过<span class="math inline">\(\text{PC-2}\)</span>函数置换，就得到了48位的子密钥<span class="math inline">\(K_1\)</span>，<span class="math inline">\(\text{PC-2}\)</span>函数置换表如下；</p><p><img src="/images/des_4.png" width="350px"></p><p>  对于上面所说的循环左移，是分别针对<span class="math inline">\(C_0\)</span>和<span class="math inline">\(D_0\)</span>所说的，它的意思是，对于<span class="math inline">\(C_0\)</span>把它的第2~28位整体左移1位，而第1位就就移动到空闲下来的第28位上；另外这里不一定是移动1位，也可能是移动2位，要按规定来，下面给出具体移动位数的规定。</p><p><img src="/images/des_5.png" width="550px"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;des-数据加密标准&quot;&gt;DES( 数据加密标准)&lt;/h2&gt;
&lt;h3 id=&quot;des&quot;&gt;DES&lt;/h3&gt;
&lt;p&gt;  &lt;span class=&quot;math inline&quot;&gt;\(\text{DES}\)&lt;/span&gt;是一种数据加密标准，是一种对称加密算法，&lt;span class=&quot;math inline&quot;&gt;\(\text{DES}\)&lt;/span&gt;算法的入口参数有三个：&lt;span class=&quot;math inline&quot;&gt;\(\text{Key、Date、Mode}\)&lt;/span&gt;。其中&lt;span class=&quot;math inline&quot;&gt;\(\text{Key}\)&lt;/span&gt;为8个字节共64位，是&lt;span class=&quot;math inline&quot;&gt;\(\text{DES}\)&lt;/span&gt;算法的工作密钥；&lt;span class=&quot;math inline&quot;&gt;\(\text{Date}\)&lt;/span&gt;也为8个字节64位，是要被加密或解密的数据；&lt;span class=&quot;math inline&quot;&gt;\(\text{Mode}\)&lt;/span&gt;为&lt;span class=&quot;math inline&quot;&gt;\(\text{DES}\)&lt;/span&gt;的工作方式，有两种：加密或解密。&lt;/p&gt;
&lt;p&gt;  &lt;span class=&quot;math inline&quot;&gt;\(\text{DES}\)&lt;/span&gt;算法是这样工作的：若&lt;span class=&quot;math inline&quot;&gt;\(\text{Mode}\)&lt;/span&gt;为加密，则用&lt;span class=&quot;math inline&quot;&gt;\(\text{Key}\)&lt;/span&gt;去把数据&lt;span class=&quot;math inline&quot;&gt;\(\text{Date}\)&lt;/span&gt;进行加密，生成&lt;span class=&quot;math inline&quot;&gt;\(\text{Date}\)&lt;/span&gt;的密码形式（64位）作为&lt;span class=&quot;math inline&quot;&gt;\(\text{DES}的输出结果；若\)&lt;/span&gt;为解密，则用&lt;span class=&quot;math inline&quot;&gt;\(\text{Key}\)&lt;/span&gt;去把密码形式的数据&lt;span class=&quot;math inline&quot;&gt;\(\text{Data}\)&lt;/span&gt;解密，还原为&lt;span class=&quot;math inline&quot;&gt;\(\text{Date}\)&lt;/span&gt;的明码形式（64位）作为&lt;span class=&quot;math inline&quot;&gt;\(\text{DES}\)&lt;/span&gt;的输出结果。在通信网络的两端，双方约定一致的&lt;span class=&quot;math inline&quot;&gt;\(\text{Key}\)&lt;/span&gt;，在通信的源点用&lt;span class=&quot;math inline&quot;&gt;\(\text{Key}\)&lt;/span&gt;对核心数据进行&lt;span class=&quot;math inline&quot;&gt;\(\text{DES}\)&lt;/span&gt;加密，然后以密码形式在公共通信网（如电话网）中传输到通信网络的终点，数据到达目的地后，用同样的&lt;span class=&quot;math inline&quot;&gt;\(\text{Key}\)&lt;/span&gt;对密码数据进行解密，便再现了明码形式的核心数据。这样，便保证了核心数据（如&lt;span class=&quot;math inline&quot;&gt;\(\text{PIN、MAC}\)&lt;/span&gt;等）在公共通信网中传输的安全性和可靠性。&lt;/p&gt;
    
    </summary>
    
      <category term="信息安全" scheme="https://yuggu.github.io/categories/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="DES" scheme="https://yuggu.github.io/tags/DES/"/>
    
      <category term="数据加密" scheme="https://yuggu.github.io/tags/%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>[POJ - 2288] Islands and Bridges</title>
    <link href="https://yuggu.github.io/2019/10/03/POJ-2288-Islands-and-Bridges/"/>
    <id>https://yuggu.github.io/2019/10/03/POJ-2288-Islands-and-Bridges/</id>
    <published>2019-10-03T08:47:04.000Z</published>
    <updated>2019-10-03T08:52:08.012Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="http://poj.org/problem?id=2288" target="_blank" rel="noopener"><span class="math inline">\(\text{POJ - 2288 Islands and Bridges}\)</span></a></p><h3 id="题意">题意</h3><p>  这里有<span class="math inline">\(n\)</span>个城市，定义最好的三角哈密顿路径为<span class="math inline">\(value\)</span>值最大的哈密顿路径，<span class="math inline">\(value\)</span>产生于三部分，如果经过某个城市<span class="math inline">\(x\)</span>那么这个城市将贡献<span class="math inline">\(value_x\)</span>，如果经过连续两个城市<span class="math inline">\(x、y\)</span>，那么将贡献<span class="math inline">\(value_x*value_y\)</span>，如果经过连续三个城市<span class="math inline">\(x、y、z\)</span>，那么将贡献<span class="math inline">\(value_x*value_y*value_z\)</span>，这里说的连续不是说城市编号连续，需要你求出这个图的三角哈密顿路径的长度，以及它的个数；</p><p>  数据范围：<span class="math inline">\(1\leq n\leq 13,value_i\leq 100\)</span>.</p><a id="more"></a><h3 id="分析">分析</h3><p>  三角的意思是，<span class="math inline">\(i\)</span>可以到<span class="math inline">\(j\)</span>，<span class="math inline">\(j\)</span>可以到<span class="math inline">\(k\)</span>，<span class="math inline">\(k\)</span>可以到<span class="math inline">\(i\)</span>，由于我们需要求连续三个城市的贡献，所以我们需要开一个三维的数组<span class="math inline">\(dp[s][i][j]\)</span>，其中<span class="math inline">\(s\)</span>表示到达<span class="math inline">\(i\)</span>的当前的状态，<span class="math inline">\(i\)</span>的前一个经过的点是<span class="math inline">\(j\)</span>，同样的还需要一个数组<span class="math inline">\(num[s][i][j]\)</span>来记录哈密顿路径的个数；</p><p>  首先初始化<span class="math inline">\(num\)</span>为0，及<span class="math inline">\(dp[(1&lt;&lt;i)|(1&lt;&lt;j)][i][j]=value_i+value_j+value_i*value_j\)</span>，<span class="math inline">\(i、j\)</span>为任意两个城市，<span class="math inline">\(i、j\)</span>不相等；</p><p>  枚举状态s，以及三个点<span class="math inline">\(i、j、k\)</span>，考虑从上一个点<span class="math inline">\(j\)</span>转移到当前点<span class="math inline">\(i\)</span>，而<span class="math inline">\(j\)</span>的上一个点为<span class="math inline">\(k\)</span>，考虑从上一个状态转移过来，那么假设当前状态为<span class="math inline">\(s\)</span>，则有<span class="math inline">\(dp[s][i][j]=\max dp[s\space xor\space (1&lt;&lt;i)][j][k]\)</span>，主要判断<span class="math inline">\(i、j、k\)</span>是否可以组成三角形，若可以还需要把<span class="math inline">\(dp[s][i][j]\)</span>加上<span class="math inline">\(value_x*value_y*value_z\)</span>，关于数量的计算，看<span class="math inline">\(dp[s][i][j]\)</span>是否能够通过之前的状态更新，若能更新，就令当前数量等于上一个转移过来的状态的数量，若二者相等，就把之前的状态的数量加到当前的状态的数量上，具体见代码；</p><p>  需要注意的是，在转移的过程中还需要判断之前的那个状态是否是有效的状态，即存在这样的情况，现在的状态是s，之前的状态<span class="math inline">\(p\)</span>，虽然它的<span class="math inline">\(j、k\)</span>位都是1，<span class="math inline">\(i\)</span>位是1，但是这个状态<span class="math inline">\(p\)</span>并不能通过<span class="math inline">\(p\)</span>之前的任意一个可行状态转移过来，所以状态<span class="math inline">\(p\)</span>的值还是初始的时候我们初始化的值；对于这种情况我们就需要判断<span class="math inline">\(dp[s^(1&lt;&lt;i)][j][k]\)</span>的状态；自己写的时候，第一次没注意<span class="math inline">\(int\)</span>，之后改成<span class="math inline">\(long\space long\)</span>，还是<span class="math inline">\(wa\)</span>，然后不知哪错，疯狂交，疯狂<span class="math inline">\(wa\)</span>，看了一个小时才找到问题。<strong>以后要注意，这里出现这样的原因，应该是图的原因，给出的图不一定是个完全图，某些边是不连通的。</strong></p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 998244353</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 500005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 300005</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c&lt;<span class="string">'0'</span> || c&gt;<span class="string">'9'</span>)</span><br><span class="line">    &#123;    </span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span>&amp;&amp;c &lt;= <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x = x * <span class="number">10</span> + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x*f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ll q, n, m, dp[<span class="number">1</span> &lt;&lt; <span class="number">14</span>][<span class="number">15</span>][<span class="number">15</span>], num[<span class="number">1</span> &lt;&lt; <span class="number">14</span>][<span class="number">15</span>][<span class="number">15</span>], val[<span class="number">15</span>], e[<span class="number">15</span>][<span class="number">15</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; val[i];</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">memset</span>(e, <span class="number">0</span>, <span class="keyword">sizeof</span>(e));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b;</span><br><span class="line">            a--, b--;</span><br><span class="line">            e[a][b] = e[b][a] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; val[<span class="number">0</span>] &lt;&lt; <span class="string">" "</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="keyword">sizeof</span>(num));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == j || !e[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">                dp[(<span class="number">1</span> &lt;&lt; i) | (<span class="number">1</span> &lt;&lt; j)][i][j] = val[i] + val[j] + val[i] * val[j];</span><br><span class="line">                num[(<span class="number">1</span> &lt;&lt; i) | (<span class="number">1</span> &lt;&lt; j)][i][j] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s &lt; <span class="number">1</span> &lt;&lt; n; s++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">                <span class="keyword">if</span> ((s &gt;&gt; i) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!e[i][j] || !((s &gt;&gt; j) &amp; <span class="number">1</span>) || i == j) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; k++) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (!((s &gt;&gt; k) &amp; <span class="number">1</span>) || !e[j][k]||k == i || j == k) <span class="keyword">continue</span>;</span><br><span class="line">                            <span class="keyword">if</span> (!dp[s ^ (<span class="number">1</span> &lt;&lt; i)][j][k]) <span class="keyword">continue</span>;</span><br><span class="line">                            ll temp = dp[s ^ (<span class="number">1</span> &lt;&lt; i)][j][k] + val[i] + val[i] * val[j];</span><br><span class="line">                            <span class="keyword">if</span> (e[i][k]) temp += val[i] * val[j] * val[k];</span><br><span class="line">                            <span class="keyword">if</span> (temp &gt; dp[s][i][j]) &#123;</span><br><span class="line">                                dp[s][i][j] = temp;</span><br><span class="line">                                num[s][i][j] =  num[s ^ (<span class="number">1</span> &lt;&lt; i)][j][k];</span><br><span class="line">                            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (temp == dp[s][i][j]) &#123;</span><br><span class="line">                                num[s][i][j] +=  num[s ^ (<span class="number">1</span> &lt;&lt; i)][j][k];                                </span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        ll ans = <span class="number">0</span>,cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == j || !e[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (ans &lt; dp[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][i][j]) &#123;</span><br><span class="line">                    ans = dp[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][i][j];</span><br><span class="line">                    cnt = num[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][i][j];</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span> (ans == dp[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][i][j])&#123;</span><br><span class="line">                    cnt += num[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="string">" "</span> &lt;&lt; cnt / <span class="number">2</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://poj.org/problem?id=2288&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{POJ - 2288 Islands and Bridges}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  这里有&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个城市，定义最好的三角哈密顿路径为&lt;span class=&quot;math inline&quot;&gt;\(value\)&lt;/span&gt;值最大的哈密顿路径，&lt;span class=&quot;math inline&quot;&gt;\(value\)&lt;/span&gt;产生于三部分，如果经过某个城市&lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt;那么这个城市将贡献&lt;span class=&quot;math inline&quot;&gt;\(value_x\)&lt;/span&gt;，如果经过连续两个城市&lt;span class=&quot;math inline&quot;&gt;\(x、y\)&lt;/span&gt;，那么将贡献&lt;span class=&quot;math inline&quot;&gt;\(value_x*value_y\)&lt;/span&gt;，如果经过连续三个城市&lt;span class=&quot;math inline&quot;&gt;\(x、y、z\)&lt;/span&gt;，那么将贡献&lt;span class=&quot;math inline&quot;&gt;\(value_x*value_y*value_z\)&lt;/span&gt;，这里说的连续不是说城市编号连续，需要你求出这个图的三角哈密顿路径的长度，以及它的个数；&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq n\leq 13,value_i\leq 100\)&lt;/span&gt;.&lt;/p&gt;
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E7%8A%B6%E5%8E%8Bdp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>[HDU - 3001] Travelling</title>
    <link href="https://yuggu.github.io/2019/10/03/HDU-3001-Travelling/"/>
    <id>https://yuggu.github.io/2019/10/03/HDU-3001-Travelling/</id>
    <published>2019-10-03T05:17:04.000Z</published>
    <updated>2019-10-03T05:20:49.011Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3001" target="_blank" rel="noopener"><span class="math inline">\(\text{HDU - 3001 Travelling}\)</span></a></p><h3 id="题意">题意</h3><p>  某一天你有个旅游的计划，这里有<span class="math inline">\(n\)</span>个城市，你想要访问完<span class="math inline">\(n\)</span>个城市，开始的时候你可以从任何城市出发，你已经知道了一个二维矩阵<span class="math inline">\(a[i][j]\)</span>，表示城市<span class="math inline">\(i\)</span>与城市<span class="math inline">\(j\)</span>之间互相抵达需要的花费，现在需要计算出访问完<span class="math inline">\(n\)</span>个城市所需要的最小花费，每个城市最多被允许访问两次。</p><p>  数据范围：<span class="math inline">\(1\leq n\leq 10\)</span>.</p><a id="more"></a><h3 id="分析">分析</h3><p>  首先如果每个点只被允许访问一次，并且指定起点，那么显然是一个最短<span class="math inline">\(\text{Hamilton}\)</span>路径问题；</p><p>  第一次读题，我以为是个不指定起点的最短哈密顿路径问题，然后我就<span class="math inline">\(O(n^{2})\)</span>枚举起点终点，然后套个<span class="math inline">\(O(2^n*n^{2})\)</span>的状压<span class="math inline">\(dp\)</span>，就是<span class="math inline">\(O(n^4*2^n)\)</span>，后来看题解发现读错题了；对于不指定起点终点的情况来说，可以不用这么做，在指定起点为0的最短哈密顿路径中，我们初始化<span class="math inline">\(dp[1][0]=0\)</span>，其他为<span class="math inline">\(\infty\)</span>，那么不指定起点它可能开始的时候在任意位置，我们就初始化，在任意城市为起点的状态为0，即<span class="math inline">\(dp[1&lt;&lt;pos][pos]_{pos\in [0,n)}=0\)</span>，最后目标是<span class="math inline">\(\min_{end\in [0,n)}dp[(1&lt;&lt;n)-1][end]\)</span>；</p><p>  那么对于这一题来说，其实将最短哈密顿路径的<code>每个点只允许被经过一次</code>，变成了<code>每个点至少经过一次，最多经过2次</code>，那么原来使用2进制，0表示没经过，1表示经过；那么现在使用3进制，0表示没经过，1表示经过一次，2表示经过2次；与2进制不同，3进制不能通过简单位运算取出某一位上的数、对某一位进行取反等一些操作，所以我们需要进行一些预处理，预处理状态<span class="math inline">\(s\)</span>的第<span class="math inline">\(k\)</span>位是什么，还需要用到<code>仅走过城市k一次</code>所表示的状态，还需要处理下这个；</p><p>  <strong>注意代码中的<span class="math inline">\(status[x]\)</span>，在三进制下是怎么表示的，这里不是说它的意义。</strong></p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 998244353</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 500005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 300005</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c&lt;<span class="string">'0'</span> || c&gt;<span class="string">'9'</span>)</span><br><span class="line">    &#123;    </span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span>&amp;&amp;c &lt;= <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x = x * <span class="number">10</span> + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x*f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, cost[<span class="number">11</span>][<span class="number">11</span>], dp[<span class="number">60005</span>][<span class="number">11</span>], status[<span class="number">11</span>], t[<span class="number">60005</span>][<span class="number">11</span>];</span><br><span class="line"><span class="comment">//预处理，状态s的第i位是t[s][i]，status[i]为，三进制下，n个城市中，只有第i个城市访被问一次所代表的状态</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    status[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">        status[i] = status[i - <span class="number">1</span>] * <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s &lt;= status[<span class="number">10</span>]; s++) &#123;</span><br><span class="line">        <span class="keyword">int</span> num = s;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">10</span>; k++) &#123;</span><br><span class="line">            t[s][k] = num % <span class="number">3</span>;</span><br><span class="line">            num /= <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 判断x的每一位是不是都大于1,说明任意一个城市都至少访问过一次</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">is_ok</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(x % <span class="number">3</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        x /= <span class="number">3</span>;</span><br><span class="line">        cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cnt &lt; n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(cost, inf, <span class="keyword">sizeof</span>(cost));</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">            a--, b--;</span><br><span class="line">            cost[a][b] = cost[b][a] = min(c, cost[b][a]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(dp, inf, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            dp[status[i]][i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s &lt; status[n]; s++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">                <span class="keyword">if</span> (t[s][i])</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (i == j) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">if</span> (t[s][j]) &#123;</span><br><span class="line">                            dp[s][i] = min(dp[s][i], dp[s - status[i]][j] + cost[j][i]);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = inf;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = status[n - <span class="number">1</span>]; i &lt; status[n]; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (is_ok(i)) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                    ans = min(ans, dp[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= inf) <span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://acm.hdu.edu.cn/showproblem.php?pid=3001&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{HDU - 3001 Travelling}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  某一天你有个旅游的计划，这里有&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个城市，你想要访问完&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个城市，开始的时候你可以从任何城市出发，你已经知道了一个二维矩阵&lt;span class=&quot;math inline&quot;&gt;\(a[i][j]\)&lt;/span&gt;，表示城市&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;与城市&lt;span class=&quot;math inline&quot;&gt;\(j\)&lt;/span&gt;之间互相抵达需要的花费，现在需要计算出访问完&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个城市所需要的最小花费，每个城市最多被允许访问两次。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq n\leq 10\)&lt;/span&gt;.&lt;/p&gt;
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E7%8A%B6%E5%8E%8Bdp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>[Atcoder ABC142 E] Get Everything</title>
    <link href="https://yuggu.github.io/2019/09/29/Atcoder-ABC142-E-Get-Everything/"/>
    <id>https://yuggu.github.io/2019/09/29/Atcoder-ABC142-E-Get-Everything/</id>
    <published>2019-09-29T11:45:14.000Z</published>
    <updated>2019-09-29T11:46:21.621Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://atcoder.jp/contests/abc142/tasks/abc142_e" target="_blank" rel="noopener"><span class="math inline">\(\text{Atcoder ABC142 E - Get Everything}\)</span></a></p><h3 id="题意">题意</h3><p>  这里有<span class="math inline">\(n\)</span>个锁着的箱子，你需要购买一些钥匙来打开这<span class="math inline">\(n\)</span>个箱子，这里有<span class="math inline">\(m\)</span>钥匙，第<span class="math inline">\(i\)</span>个钥匙的花费为<span class="math inline">\(a_i\)</span>，它能打开<span class="math inline">\(n\)</span>个箱子中的<span class="math inline">\(b_i\)</span>个，分别是<span class="math inline">\(c_{i1}、c_{i2}\dots c_{i{b_{n}}}\)</span>，现在你需要从这<span class="math inline">\(m\)</span>个钥匙中选出若干个钥匙来打开这<span class="math inline">\(n\)</span>个箱子，使得花费最小。</p><p>  输入格式：第一行<span class="math inline">\(n、m\)</span>，之后<span class="math inline">\(2*m\)</span>行，每连续两行的第一行，<span class="math inline">\(a_i、b_i\)</span>，之后一行<span class="math inline">\(b_i\)</span>个数，代表这个钥匙可以打开的箱子的编号。</p><p>  输出格式：输出一行最小花费.</p><p>  数据范围：<span class="math inline">\(1\leq n\leq 12,1\leq m\leq 10^3,1\leq a_{i}\leq 10^5,1\leq b_i\leq n,1\leq c_{i1}&lt;c_{i2}&lt;\dots &lt;c_{ib_{i}}\leq n\)</span>. <a id="more"></a></p><h3 id="分析">分析</h3><p>  第一印象这是个<span class="math inline">\(dp\)</span>，注意到<span class="math inline">\(n\)</span>最大为<span class="math inline">\(12\)</span>，并结合题意可知，需要使用状压<span class="math inline">\(dp\)</span>；</p><p>  二进制压缩保存每个钥匙能开的那些宝箱的状态，<span class="math inline">\(1\)</span>表示箱子可以被开，<span class="math inline">\(0\)</span>表示箱子不能被打开，<span class="math inline">\(f[i]\)</span>表示打开箱子的状态为<span class="math inline">\(i\)</span>时，所需要的最小花费，枚举箱子的状态<span class="math inline">\(i\)</span>和第<span class="math inline">\(j\)</span>枚钥匙，进行状态转移：</p><p><span class="math display">\[f[i|state[j]]=\min(f[i|state[j]],f[i]+cost[j])\]</span></p><p>  初始状态<span class="math inline">\(f[0]\)</span>为<span class="math inline">\(0\)</span>，其他为<span class="math inline">\(\infty\)</span>，目标为<span class="math inline">\(f[(1&lt;&lt;n)-1]\)</span>.</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> cost, state;</span><br><span class="line">&#125;p[<span class="number">1005</span>];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> n, m, f[<span class="number">1</span> &lt;&lt; <span class="number">14</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">  <span class="built_in">memset</span>(f, <span class="number">0x3f3f3f3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">  f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; p[i].cost;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>, t, x;</span><br><span class="line">      <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">      <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">          sum += (<span class="number">1</span> &lt;&lt; (x - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    p[i].state = sum;</span><br><span class="line">      f[sum] = p[i].cost;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1</span> &lt;&lt; n; i++)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">        f[i | p[j].state] = min(f[i | p[j].state], f[i] + p[j].cost);</span><br><span class="line">        &#125;</span><br><span class="line">  <span class="keyword">if</span> (f[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>] == <span class="number">0x3f3f3f3f</span>)<span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; f[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://atcoder.jp/contests/abc142/tasks/abc142_e&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{Atcoder ABC142 E - Get Everything}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  这里有&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个锁着的箱子，你需要购买一些钥匙来打开这&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个箱子，这里有&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;钥匙，第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;个钥匙的花费为&lt;span class=&quot;math inline&quot;&gt;\(a_i\)&lt;/span&gt;，它能打开&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个箱子中的&lt;span class=&quot;math inline&quot;&gt;\(b_i\)&lt;/span&gt;个，分别是&lt;span class=&quot;math inline&quot;&gt;\(c_{i1}、c_{i2}\dots c_{i{b_{n}}}\)&lt;/span&gt;，现在你需要从这&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;个钥匙中选出若干个钥匙来打开这&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个箱子，使得花费最小。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行&lt;span class=&quot;math inline&quot;&gt;\(n、m\)&lt;/span&gt;，之后&lt;span class=&quot;math inline&quot;&gt;\(2*m\)&lt;/span&gt;行，每连续两行的第一行，&lt;span class=&quot;math inline&quot;&gt;\(a_i、b_i\)&lt;/span&gt;，之后一行&lt;span class=&quot;math inline&quot;&gt;\(b_i\)&lt;/span&gt;个数，代表这个钥匙可以打开的箱子的编号。&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行最小花费.&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq n\leq 12,1\leq m\leq 10^3,1\leq a_{i}\leq 10^5,1\leq b_i\leq n,1\leq c_{i1}&amp;lt;c_{i2}&amp;lt;\dots &amp;lt;c_{ib_{i}}\leq n\)&lt;/span&gt;.
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E7%8A%B6%E5%8E%8Bdp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>Atcoder ABC140 E Second Sum</title>
    <link href="https://yuggu.github.io/2019/09/29/Atcoder-ABC140-E-Second-Sum/"/>
    <id>https://yuggu.github.io/2019/09/29/Atcoder-ABC140-E-Second-Sum/</id>
    <published>2019-09-29T10:40:54.000Z</published>
    <updated>2019-09-29T10:46:06.200Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://atcoder.jp/contests/abc140/tasks/abc140_e" target="_blank" rel="noopener"><span class="math inline">\(\text{Atcoder ABC140 E}\)</span></a></p><h3 id="题意">题意</h3><p>  给你一个长度为<span class="math inline">\(n\)</span>的序列<span class="math inline">\(P\)</span>，对于一个区间<span class="math inline">\((L,R)\)</span>，<span class="math inline">\(X_{L}\)</span>为该区间第二大的数，求出<span class="math inline">\(\displaystyle\sum_{L=1}^{N-1}\sum_{R-L+1}^{N}X_{L,R}\)</span>.</p><p>  即让你求出对于每一个<span class="math inline">\(a[i]\)</span>，<span class="math inline">\(a[i]\)</span>作为第二大值的区间个数<span class="math inline">\(cnt\)</span>乘以<span class="math inline">\(a[i]\)</span>，求出这个结果。</p><p>  输入格式：第一行输入<span class="math inline">\(N\)</span>，第二行输入一个长度为<span class="math inline">\(n\)</span>的序列<span class="math inline">\(P\)</span>.</p><p>  输出格式：输出一行.</p><p>  数据范围：<span class="math inline">\(2\leq n\leq 10^{5},1\leq P_{I}\leq n,P_{i}\neq P_{j}\)</span>. <a id="more"></a></p><h3 id="分析">分析</h3><p>  首先整个序列是<span class="math inline">\(1-n\)</span>的一个排列，首先考虑这样一种情况，对于<span class="math inline">\(a[i]\)</span>来说，<span class="math inline">\(a[x_1]、a[x_2]\)</span>分别是比<span class="math inline">\(a[i]\)</span>第一大、第二大的并且位于<span class="math inline">\(a[i]\)</span>的两个数，<span class="math inline">\(a[x_3]、a[x_4]\)</span>则是比<span class="math inline">\(a[i]\)</span>第一大、第二大位于<span class="math inline">\(a[i]\)</span>右边的两个数，那么则有<span class="math inline">\(a[i]\)</span>作为第二大的数对答案的贡献为：<span class="math inline">\(((x_2-x_1)*(x_3-i)+(x_4-x_3)*(i-x_2))*a[i]\)</span>。</p><p>  所以实际上我们只关心，比当前<span class="math inline">\(a[x]\)</span>大的数，以及它的下标；那么我们使用一个<span class="math inline">\(set\)</span>，将数列从大到小，将它们的下标插入<span class="math inline">\(set\)</span>里，对当前的<span class="math inline">\(a[i]\)</span>，在<span class="math inline">\(set\)</span>里对<span class="math inline">\(i\)</span>进行二分找<span class="math inline">\(x_1、x_2、x_3、x_4\)</span>，此时<span class="math inline">\(set\)</span>里的元素一定是比<span class="math inline">\(a[i]\)</span>大的，这样就能以上面的方式求出<span class="math inline">\(a[i]\)</span>对答案的贡献。</p><p>  注意考虑特殊的情况。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 998244353</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 500005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 300005</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c&lt;<span class="string">'0'</span> || c&gt;<span class="string">'9'</span>)</span><br><span class="line">    &#123;    </span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span>&amp;&amp;c &lt;= <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x = x * <span class="number">10</span> + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x*f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, a[N], p[N];</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">multiset</span>&lt;<span class="keyword">int</span>&gt;::iterator st;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">multiset</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">    s.insert(<span class="number">0</span>), s.insert(<span class="number">0</span>);</span><br><span class="line">    s.insert(n + <span class="number">1</span>), s.insert(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        p[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        st r2 = s.upper_bound(p[i]), l2 = r2++;</span><br><span class="line">        st r1 = l2--, l1 = l2--;</span><br><span class="line">        ans += <span class="number">1l</span>l * (*l1 - *l2) * (*r1 - p[i]) * i;</span><br><span class="line">        ans += <span class="number">1l</span>l * (*r2 - *r1) * (p[i] - *l1) * i;</span><br><span class="line">        s.insert(p[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://atcoder.jp/contests/abc140/tasks/abc140_e&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{Atcoder ABC140 E}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  给你一个长度为&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;的序列&lt;span class=&quot;math inline&quot;&gt;\(P\)&lt;/span&gt;，对于一个区间&lt;span class=&quot;math inline&quot;&gt;\((L,R)\)&lt;/span&gt;，&lt;span class=&quot;math inline&quot;&gt;\(X_{L}\)&lt;/span&gt;为该区间第二大的数，求出&lt;span class=&quot;math inline&quot;&gt;\(\displaystyle\sum_{L=1}^{N-1}\sum_{R-L+1}^{N}X_{L,R}\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  即让你求出对于每一个&lt;span class=&quot;math inline&quot;&gt;\(a[i]\)&lt;/span&gt;，&lt;span class=&quot;math inline&quot;&gt;\(a[i]\)&lt;/span&gt;作为第二大值的区间个数&lt;span class=&quot;math inline&quot;&gt;\(cnt\)&lt;/span&gt;乘以&lt;span class=&quot;math inline&quot;&gt;\(a[i]\)&lt;/span&gt;，求出这个结果。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行输入&lt;span class=&quot;math inline&quot;&gt;\(N\)&lt;/span&gt;，第二行输入一个长度为&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;的序列&lt;span class=&quot;math inline&quot;&gt;\(P\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行.&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(2\leq n\leq 10^{5},1\leq P_{I}\leq n,P_{i}\neq P_{j}\)&lt;/span&gt;.
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="二分" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86/"/>
    
    
      <category term="思维" scheme="https://yuggu.github.io/tags/%E6%80%9D%E7%BB%B4/"/>
    
      <category term="二分" scheme="https://yuggu.github.io/tags/%E4%BA%8C%E5%88%86/"/>
    
  </entry>
  
  <entry>
    <title>[POJ - 1185] 炮兵阵地</title>
    <link href="https://yuggu.github.io/2019/09/27/POJ-1185-%E7%82%AE%E5%85%B5%E9%98%B5%E5%9C%B0/"/>
    <id>https://yuggu.github.io/2019/09/27/POJ-1185-炮兵阵地/</id>
    <published>2019-09-27T12:16:45.000Z</published>
    <updated>2019-09-29T11:00:28.411Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="http://poj.org/problem?id=1185" target="_blank" rel="noopener"><span class="math inline">\(\text{POJ - 1185 炮兵阵地}\)</span></a></p><h3 id="题意">题意</h3><p>  给你一个<span class="math inline">\(N\times M\)</span>的网格地图，这个地图上的每一格上如果是<code>H</code>则代表山地，若是<code>P</code>则代表平原，在平原上可以布置一只炮兵部队（山地上不能部署部队），一只炮兵的攻击范围如下。</p><p><img src="/images/POJ1185_1.jpg" width="300px"></p><p>  现在需要你在这张<span class="math inline">\(N\times M\)</span>的地图上部署部队，在避免误伤的前提下（即任意一支部队都不在其他部队的攻击范围之内），问你最多能布置多少只部队。</p><p>  输入格式：第一行输入<span class="math inline">\(N,M\)</span>，之后输入一个<span class="math inline">\(N\times M\)</span>的使用<code>H</code>和<code>P</code>表示的地图。</p><p>  输出格式：输出最多可以布置的部队的数量。</p><p>  数据范围：<span class="math inline">\(N\leq 100,M\leq 10\)</span> <a id="more"></a></p><h3 id="分析">分析</h3><p>  如果攻击范围为沿纵横各延伸1格，那么我们将第<span class="math inline">\(i\)</span>行作为阶段，每一行部队的布置情况作为状态，那么枚举两层（第<span class="math inline">\(i\)</span>和第<span class="math inline">\(i-1\)</span>行）的<strong>可行状态</strong>，进行转移即可，然而这里的攻击范围波及到了第<span class="math inline">\(i-2\)</span>行，所以我们还要考虑第<span class="math inline">\(i-2\)</span>行的状态。</p><p>  将放置部队的位置置为1，首先预处理一下所有的可行的状态（即相邻两个<span class="math inline">\(1\)</span>之间的距离不小于3），用<span class="math inline">\(f[i][j][k]\)</span>表示第<span class="math inline">\(i\)</span>行的状态为<span class="math inline">\(j\)</span>第<span class="math inline">\(i-1\)</span>行的状态为<span class="math inline">\(k\)</span>时，前<span class="math inline">\(i\)</span>行最多能放置多少个部队，考虑<span class="math inline">\(f[i-1][k][l]\)</span>向<span class="math inline">\(f[i][j][k]\)</span>转移，那么有：</p><p><span class="math display">\[f[i][j][k]=\max{f[i-1][k][l]}+sum(i)\]</span></p><p>  在满足状态<span class="math inline">\(j\)</span>不与状态<span class="math inline">\(k\)</span>和<span class="math inline">\(l\)</span>冲突的情况下，<span class="math inline">\(sum(i)\)</span>即是这种情况下的第<span class="math inline">\(i\)</span>行状态<span class="math inline">\(j\)</span>的<span class="math inline">\(1\)</span>的个数，还需要预处理一下地图的状态，保证每行地图的状态与每一行布置部队的状态不冲突（即只能在<code>P</code>位置布置部队），还要预处理一下每一行<span class="math inline">\(((1&lt;&lt;M)-1)\)</span>个状态中的可行的状态（即相邻两个<span class="math inline">\(1\)</span>之间的距离不小于<span class="math inline">\(3\)</span>的状态），<span class="math inline">\(M\)</span>为<span class="math inline">\(10\)</span>的时候最多有<span class="math inline">\(60\)</span>个，存储信息的<span class="math inline">\(f\)</span>数组的第二维第三维最大开<span class="math inline">\(61\)</span>即可（用来保存可行状态），之后逐行进行状态转移即可。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//#include &lt;unordered_map&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">11</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">102</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, sta[<span class="number">65</span>], sum[<span class="number">65</span>], cnt, dp[<span class="number">1</span> &lt;&lt; M][<span class="number">65</span>][<span class="number">65</span>], pk[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">char</span> s[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//相邻两个炮兵距离不超过3的这种状态的处理，最多只有60个</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1</span> &lt;&lt; m; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(i &amp; (i &lt;&lt; <span class="number">1</span>)) &amp;&amp; !(i &amp; (i &lt;&lt; <span class="number">2</span>))) &#123;</span><br><span class="line">            sta[++cnt] = i;</span><br><span class="line">            <span class="keyword">int</span> j = i, cot = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (j) &#123;</span><br><span class="line">                j -= j &amp; -j;</span><br><span class="line">                cot++;</span><br><span class="line">            &#125;</span><br><span class="line">            sum[cnt] = cot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[j] == <span class="string">'H'</span>)</span><br><span class="line">                pk[i] += (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(sta[i] &amp; pk[<span class="number">1</span>])) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cnt; j++)</span><br><span class="line">                dp[<span class="number">1</span>][i][j] = sum[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cnt; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (pk[i] &amp; sta[j]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= cnt; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (sta[k] &amp; sta[j]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (sta[k] &amp; pk[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> p = <span class="number">1</span>; p &lt;= cnt; p++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (sta[p] &amp; sta[k]) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span> (sta[p] &amp; sta[j]) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span> (pk[i - <span class="number">2</span>] &amp; sta[p]) <span class="keyword">continue</span>;</span><br><span class="line">                    dp[i][j][k] = max(dp[i][j][k], dp[i - <span class="number">1</span>][k][p] + sum[j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cnt; j++)</span><br><span class="line">            ans = max(ans, dp[n][i][j]);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://poj.org/problem?id=1185&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{POJ - 1185 炮兵阵地}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  给你一个&lt;span class=&quot;math inline&quot;&gt;\(N\times M\)&lt;/span&gt;的网格地图，这个地图上的每一格上如果是&lt;code&gt;H&lt;/code&gt;则代表山地，若是&lt;code&gt;P&lt;/code&gt;则代表平原，在平原上可以布置一只炮兵部队（山地上不能部署部队），一只炮兵的攻击范围如下。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/POJ1185_1.jpg&quot; width=&quot;300px&quot;&gt;&lt;/p&gt;
&lt;p&gt;  现在需要你在这张&lt;span class=&quot;math inline&quot;&gt;\(N\times M\)&lt;/span&gt;的地图上部署部队，在避免误伤的前提下（即任意一支部队都不在其他部队的攻击范围之内），问你最多能布置多少只部队。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行输入&lt;span class=&quot;math inline&quot;&gt;\(N,M\)&lt;/span&gt;，之后输入一个&lt;span class=&quot;math inline&quot;&gt;\(N\times M\)&lt;/span&gt;的使用&lt;code&gt;H&lt;/code&gt;和&lt;code&gt;P&lt;/code&gt;表示的地图。&lt;/p&gt;
&lt;p&gt;  输出格式：输出最多可以布置的部队的数量。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(N\leq 100,M\leq 10\)&lt;/span&gt;
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E7%8A%B6%E5%8E%8Bdp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>[HDU - 1575] Tr A</title>
    <link href="https://yuggu.github.io/2019/09/25/HDU-1575-Tr-A/"/>
    <id>https://yuggu.github.io/2019/09/25/HDU-1575-Tr-A/</id>
    <published>2019-09-25T11:15:50.000Z</published>
    <updated>2019-09-25T12:52:30.249Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://vjudge.net/problem/SPOJ-NGCD" target="_blank" rel="noopener"><span class="math inline">\(\text{SPOJ - NO GCD}\)</span></a></p><h3 id="题意">题意</h3><p>  A是一个方阵，<span class="math inline">\(Tr\space A\)</span>表示<span class="math inline">\(A\)</span>的迹(即是主对角线上的和)，现在要求<span class="math inline">\(Tr(A^k)\%9973\)</span></p><p>  输入格式：第一行为<span class="math inline">\(t\)</span>，共<span class="math inline">\(t\)</span>组测试样例，每组数据的一行两个数字<span class="math inline">\(n,k\)</span>，接下来<span class="math inline">\(n\)</span>行<span class="math inline">\(n\)</span>列，表示方阵<span class="math inline">\(A\)</span></p><p>  输出格式：每组测试样例一行输出，输出<span class="math inline">\(Tr(A^k)\%9973\)</span></p><p>  数据范围：<span class="math inline">\(2\leq n\leq 10,2\leq k\leq 10^9\)</span> <a id="more"></a></p><h3 id="分析">分析</h3><p>  这是一个矩阵快速幂的模板题；</p><p>  对于<span class="math inline">\(\text{Successione di Fibonacci}\)</span>，有：</p><ul><li><span class="math inline">\(f_{0}=0\)</span></li><li><span class="math inline">\(f_{1}=1\)</span></li><li><span class="math inline">\(f_{n}=f_{n-1}+f_{n-2}（n≧2）\)</span></li></ul><p>  如果需要我们求出<span class="math inline">\(f_{1e9}\%(1e9+7)\)</span>的结果，那么我们直接利用递推公式进行求解，显然是不可行的。</p><p>  定义<span class="math inline">\(F(n)=\begin{bmatrix} f_{n} &amp; f_{n+1} \end{bmatrix}\)</span>，且<span class="math inline">\(f_0=0,f_1=1,f_{n}=f_{n-1}+f_{n-2}（n≧2）\)</span>，我们有：</p><p><span class="math display">\[  F(n)=\begin{bmatrix} f_{n} &amp; f_{n+1}\end{bmatrix} = \begin{bmatrix} f_{n-1} &amp; f_{n}\end{bmatrix}* \begin{bmatrix}0&amp;1\\ 1 &amp; 1\end{bmatrix}=\vdots=\begin{bmatrix} f_{0} &amp; f_{1}\end{bmatrix}*\begin{bmatrix}0&amp;1\\ 1 &amp; 1\end{bmatrix}^{n}\]</span></p><p>  令<span class="math inline">\(A=\begin{bmatrix}0&amp;1\\ 1 &amp; 1\end{bmatrix}\)</span>，则有<span class="math inline">\(F(n)=F(0)*A^{n}\)</span>，实际上我们只要考虑求解<span class="math inline">\(A^n\)</span>即可，如果这里的<span class="math inline">\(A\)</span>是一个整数，那么我们直接快速幂即可，但是这里是一个矩阵。</p><p>  这里有涉及到广义快速幂的概念；</p><p>  <span class="math inline">\((G,*)\)</span>是一个群（<span class="math inline">\(1.*\)</span>在<span class="math inline">\(G\)</span>上的运算是封闭的；<span class="math inline">\(2.\)</span>满足交换律；<span class="math inline">\(3.\)</span>对<span class="math inline">\(G\)</span>中的任意元素含有唯一的单位元；<span class="math inline">\(4.\)</span>除零元外均有逆元），<span class="math inline">\(*\)</span>是一种二元运算（<strong>泛指</strong>），<span class="math inline">\(e\)</span>为<span class="math inline">\(*\)</span>在<span class="math inline">\(G\)</span>上的单位元，<span class="math inline">\(a\in G\)</span>，<span class="math inline">\(e*a=a*e=a\)</span>，<span class="math inline">\((a^{-1})^{-1}=a\)</span>，规定<span class="math inline">\(a^{0}=1,a^{-n}=(a^{n})^{-1}\)</span>，可以证明<span class="math inline">\(a^{m}\cdot a^{n}=a^{m+n}\)</span>，<span class="math inline">\((a^{m})^{n}=a^{mn}\)</span>，那么关于它的快速幂可以这样写：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typename</span> <span class="title">pow</span><span class="params">(<span class="keyword">typename</span> a, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="comment">//ans初始化为单位元</span></span><br><span class="line"><span class="keyword">typename</span> ans = e;</span><br><span class="line"><span class="keyword">while</span> (n) &#123;</span><br><span class="line"><span class="keyword">if</span> (n &amp; <span class="number">1</span>) ans = ans * a;</span><br><span class="line">a = a * a;</span><br><span class="line">n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  对于上面的<span class="math inline">\(A^n\)</span>，那么<span class="math inline">\((G,*)\)</span>是一个群，<span class="math inline">\(*\)</span>为矩阵乘法，<span class="math inline">\(G\)</span>元素为<span class="math inline">\(e、A、A^{2}、A^{3}\dots A^{\infty}\)</span>，并且<span class="math inline">\(A\)</span>是一个方阵，那么广义快速幂对于它来说也是成立的，注意<span class="math inline">\(A\)</span>的单位元是单位矩阵。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD 9973</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span> &#123;</span></span><br><span class="line">    ll M[maxn][maxn];</span><br><span class="line">    Matrix(<span class="keyword">const</span> <span class="keyword">int</span> I = <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">memset</span>(M, <span class="number">0</span>, <span class="keyword">sizeof</span>(M));</span><br><span class="line">        <span class="keyword">if</span> (I)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">                M[i][i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix <span class="keyword">operator</span> * (<span class="keyword">const</span> Matrix &amp; a) &#123;</span><br><span class="line">        Matrix t;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++)</span><br><span class="line">                    t.M[i][j] = (t.M[i][j] + M[i][k] * a.M[k][j]) % MOD;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Matrix <span class="title">pow</span><span class="params">(Matrix a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="function">Matrix <span class="title">c</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (b) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b &amp; <span class="number">1</span>) c = c * a;</span><br><span class="line">        a = a * a;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        Matrix a;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                <span class="built_in">cin</span> &gt;&gt; a.M[i][j];</span><br><span class="line">        Matrix ans = <span class="built_in">pow</span>(a, k);</span><br><span class="line">        ll res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            res = (res + ans.M[i][i]) % MOD;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://vjudge.net/problem/SPOJ-NGCD&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{SPOJ - NO GCD}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  A是一个方阵，&lt;span class=&quot;math inline&quot;&gt;\(Tr\space A\)&lt;/span&gt;表示&lt;span class=&quot;math inline&quot;&gt;\(A\)&lt;/span&gt;的迹(即是主对角线上的和)，现在要求&lt;span class=&quot;math inline&quot;&gt;\(Tr(A^k)\%9973\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;  输入格式：第一行为&lt;span class=&quot;math inline&quot;&gt;\(t\)&lt;/span&gt;，共&lt;span class=&quot;math inline&quot;&gt;\(t\)&lt;/span&gt;组测试样例，每组数据的一行两个数字&lt;span class=&quot;math inline&quot;&gt;\(n,k\)&lt;/span&gt;，接下来&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;行&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;列，表示方阵&lt;span class=&quot;math inline&quot;&gt;\(A\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;  输出格式：每组测试样例一行输出，输出&lt;span class=&quot;math inline&quot;&gt;\(Tr(A^k)\%9973\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(2\leq n\leq 10,2\leq k\leq 10^9\)&lt;/span&gt;
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="数学" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6/"/>
    
    
      <category term="数学" scheme="https://yuggu.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="广义快速幂" scheme="https://yuggu.github.io/tags/%E5%B9%BF%E4%B9%89%E5%BF%AB%E9%80%9F%E5%B9%82/"/>
    
      <category term="矩阵快速幂" scheme="https://yuggu.github.io/tags/%E7%9F%A9%E9%98%B5%E5%BF%AB%E9%80%9F%E5%B9%82/"/>
    
  </entry>
  
  <entry>
    <title>[SPOJ NO GCD]</title>
    <link href="https://yuggu.github.io/2019/09/25/SPOJ-NO-GCD/"/>
    <id>https://yuggu.github.io/2019/09/25/SPOJ-NO-GCD/</id>
    <published>2019-09-25T09:24:45.000Z</published>
    <updated>2019-09-27T12:18:10.636Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://vjudge.net/problem/SPOJ-NGCD" target="_blank" rel="noopener"><span class="math inline">\(\text{SPOJ - NO GCD}\)</span></a></p><h3 id="题意">题意</h3><p>  给你一个长度为<span class="math inline">\(n\)</span>的序列<span class="math inline">\(a\)</span>，并且对于任意一个数<span class="math inline">\(a[i]\)</span>，它只有小于<span class="math inline">\(50\)</span>的素因子，且不含有平方因子，求有多少对<span class="math inline">\((i,j)\)</span>，使得<span class="math inline">\(a[i]和a[j]\)</span>互质，或者<span class="math inline">\(gcd\)</span>是质数。</p><p>  输入格式：第一行输入<span class="math inline">\(t\)</span>，包含<span class="math inline">\(t\)</span>组样例，下面每组样例第一行一个<span class="math inline">\(n\)</span>，下面一行输入一个长度为<span class="math inline">\(n\)</span>的序列<span class="math inline">\(a\)</span>。</p><p>  数据范围：<span class="math inline">\(1\leq t\leq 10,1\leq 100000\)</span>.</p><p>  输出格式：每个样例对应一行一个输出结果。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  这一题是偶然在别人博客看到的，几乎没怎么写过数学题，感到这个思路非常非常的巧妙。</p><p>  首先考虑到了<span class="math inline">\(50\)</span>以内的素数仅有<span class="math inline">\(15\)</span>个，而对于<span class="math inline">\(a\)</span>序列中的任意两个数来说，它们的<span class="math inline">\(gcd\)</span>要么为<span class="math inline">\(1\)</span>，要么在这<span class="math inline">\(15\)</span>个素数之中，要么为<span class="math inline">\(1\)</span>，如果用二进制表示，那么则有它们二进制表示的与的结果为<span class="math inline">\(0\)</span>，或者某一位为<span class="math inline">\(1\)</span>(恰好有一个素因子)。对于一个二进制表示<span class="math inline">\(i\)</span>来说，我们需要求出它的个数与，它补集的子集个数的乘积，这即是求出了<span class="math inline">\(gcd\)</span>为<span class="math inline">\(1\)</span>的情况，对于不为<span class="math inline">\(1\)</span>的情况，我们求出它与，它的补集对某一位<span class="math inline">\(0\)</span>取反变成<span class="math inline">\(1\)</span>的所有子集个数在减去它补集没去反之间子集的个数，这二者乘积，对所有的状态进行累加。</p><p>  关键是如何快速求子集个数，对于<span class="math inline">\(i\)</span>，求所有的<span class="math inline">\(j\)</span>，<span class="math inline">\(j\leq i \&amp;\&amp;(i|j)==i\)</span>。网上代码为：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;M;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(j=i;;j=(j<span class="number">-1</span>)&amp;i)&#123;   </span><br><span class="line"><span class="comment">//s[i]为i的子集的个数，子集j对应的个数为num[j]     </span></span><br><span class="line">        s[i]+=num[j]; <span class="comment">//关键，得到子集 </span></span><br><span class="line">        <span class="keyword">if</span>(!j) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 100005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD 1000000007</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">1</span> &lt;&lt; <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, a[M], b[M], p[<span class="number">16</span>] = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">23</span>, <span class="number">29</span>, <span class="number">31</span>, <span class="number">37</span>, <span class="number">41</span>, <span class="number">43</span>, <span class="number">47</span>&#125;;</span><br><span class="line">                                <span class="comment">//2,3,5,7,11,13,17,19,23,29,31,37,41,43,47</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">        <span class="built_in">memset</span>(b, <span class="number">0</span>, <span class="keyword">sizeof</span>(b));</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        ll x;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">            <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">15</span>; j++)</span><br><span class="line">                <span class="keyword">if</span> (x % p[j] == <span class="number">0</span>) temp += (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">            <span class="comment">//x为1时，temp为0</span></span><br><span class="line">            a[temp]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)</span><br><span class="line">            <span class="comment">//枚举j二进制表示下的子集</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i;;j = (j - <span class="number">1</span>)&amp; i) &#123;</span><br><span class="line">                b[i] += a[j];</span><br><span class="line">                <span class="comment">//写在这里，是考虑特殊情况，比如输入的x为1</span></span><br><span class="line">                <span class="keyword">if</span> (!j) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++) &#123;</span><br><span class="line">            <span class="comment">//gcd为1</span></span><br><span class="line">            ans += <span class="number">1l</span>l * a[i] * b[i ^ (M - <span class="number">1</span>)];</span><br><span class="line">            <span class="comment">//gcd为一个素数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">15</span>; j++)</span><br><span class="line">                <span class="keyword">if</span> ((i &gt;&gt; j) &amp; <span class="number">1</span>)</span><br><span class="line">                    ans += <span class="number">1l</span>l * a[i] * (b[i ^ (M - <span class="number">1</span>) ^ (<span class="number">1</span> &lt;&lt; j)] - b[i ^ (M - <span class="number">1</span>)]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://vjudge.net/problem/SPOJ-NGCD&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{SPOJ - NO GCD}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  给你一个长度为&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;的序列&lt;span class=&quot;math inline&quot;&gt;\(a\)&lt;/span&gt;，并且对于任意一个数&lt;span class=&quot;math inline&quot;&gt;\(a[i]\)&lt;/span&gt;，它只有小于&lt;span class=&quot;math inline&quot;&gt;\(50\)&lt;/span&gt;的素因子，且不含有平方因子，求有多少对&lt;span class=&quot;math inline&quot;&gt;\((i,j)\)&lt;/span&gt;，使得&lt;span class=&quot;math inline&quot;&gt;\(a[i]和a[j]\)&lt;/span&gt;互质，或者&lt;span class=&quot;math inline&quot;&gt;\(gcd\)&lt;/span&gt;是质数。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行输入&lt;span class=&quot;math inline&quot;&gt;\(t\)&lt;/span&gt;，包含&lt;span class=&quot;math inline&quot;&gt;\(t\)&lt;/span&gt;组样例，下面每组样例第一行一个&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;，下面一行输入一个长度为&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;的序列&lt;span class=&quot;math inline&quot;&gt;\(a\)&lt;/span&gt;。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq t\leq 10,1\leq 100000\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：每个样例对应一行一个输出结果。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="数学" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6/"/>
    
    
      <category term="数学" scheme="https://yuggu.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="思维" scheme="https://yuggu.github.io/tags/%E6%80%9D%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>[HC - 1044] 状态压缩一</title>
    <link href="https://yuggu.github.io/2019/09/22/HC-1044-%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9%E4%B8%80/"/>
    <id>https://yuggu.github.io/2019/09/22/HC-1044-状态压缩一/</id>
    <published>2019-09-22T07:01:35.000Z</published>
    <updated>2019-09-29T10:59:44.185Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://hihocoder.com/problemset/problem/1044" target="_blank" rel="noopener"><span class="math inline">\(\text{hihoCoder - 1044 状态压缩一}\)</span></a></p><h3 id="题意">题意</h3><p>  火车上有<span class="math inline">\(n\)</span>个座位排成一排，第<span class="math inline">\(i\)</span>个座位上有数目<span class="math inline">\(w[i]\)</span>的垃圾，你需要尽可能多的清扫这些垃圾，然而在连续<span class="math inline">\(m\)</span>个座位上，你最多只能选取<span class="math inline">\(q\)</span>个位置进行清扫，不然会让乘客不愉快，现在问你最多可以清扫多少数目的垃圾；</p><p>  输入格式：输入包含一组样例，第一行三个数<span class="math inline">\(n,m,q\)</span>，第二行<span class="math inline">\(n\)</span>个整数，第<span class="math inline">\(i\)</span>个为<span class="math inline">\(w[i]\)</span>;</p><p>  数据范围：<span class="math inline">\(N\leq 1000,2\leq M\leq 10,1\leq q\leq m,w[i]\leq 100\)</span>.</p><p>  输出格式：输出一行代表最多可以清扫的垃圾数目； <a id="more"></a></p><h3 id="分析">分析</h3><p>  如果我们考虑每个位置的选与不选，那么最多可能有<span class="math inline">\(2^1000\)</span>种状态，显然这种想法不现实，我们发现，如果当前位置<span class="math inline">\(i\)</span>的前<span class="math inline">\(m-1\)</span>个位置中已经选了<span class="math inline">\(q\)</span>个了(即在<span class="math inline">\([i-m+1,i-1]\)</span>中选<span class="math inline">\(q\)</span>个)，这种状态为<span class="math inline">\(j\)</span>，那么显然当前位置一定不能选，所以当前位置的最大值等于，在第<span class="math inline">\(i-1\)</span>个位置，<span class="math inline">\([i-m+1,i-1]\)</span>中选了<span class="math inline">\(q\)</span>个，而第<span class="math inline">\(i-m\)</span>这个位置一定不选(对于<span class="math inline">\(i-1\)</span>来说，需要在<span class="math inline">\([i-m,i-1]\)</span>中选<span class="math inline">\(q\)</span>个)，这时候的最大值，同理当第<span class="math inline">\(i\)</span>个位置选的时候，考虑它的状态可以从<span class="math inline">\(i-1\)</span>的什么状态转移过来即可。</p><p>  第<span class="math inline">\(i\)</span>个座位为阶段，<span class="math inline">\(i\)</span>之前包括<span class="math inline">\(i\)</span>个<span class="math inline">\(m\)</span>个选若干个为状态。</p><p>  首先预处理一下，<span class="math inline">\(m\)</span>个连续座位里选小于<span class="math inline">\(q\)</span>个座位的状态，具体细节见代码。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, q, w[<span class="number">1005</span>], f[<span class="number">1005</span>][<span class="number">1</span> &lt;&lt; <span class="number">12</span>], mark[<span class="number">1</span> &lt;&lt; <span class="number">12</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; w[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1</span> &lt;&lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">            <span class="keyword">if</span> (i &gt;&gt; j &amp; <span class="number">1</span>) cnt++;</span><br><span class="line">        mark[i] = cnt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1</span> &lt;&lt; m; j++) &#123; </span><br><span class="line">            <span class="keyword">if</span> (mark[j] &lt;= q) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j &amp; <span class="number">1</span>)  f[i][j] = max(f[i - <span class="number">1</span>][j &gt;&gt; <span class="number">1</span>], f[i - <span class="number">1</span>][(j &gt;&gt; <span class="number">1</span>) + (<span class="number">1</span> &lt;&lt; (m - <span class="number">1</span>))]) + w[i];</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (mark[j] == q) f[i][j] = f[i - <span class="number">1</span>][j &gt;&gt; <span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (mark[j] &lt; q)</span><br><span class="line">                        f[i][j] = max(f[i - <span class="number">1</span>][j &gt;&gt; <span class="number">1</span>], f[i - <span class="number">1</span>][(j &gt;&gt; <span class="number">1</span>) + (<span class="number">1</span> &lt;&lt; (m - <span class="number">1</span>))]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1</span> &lt;&lt; m; i++)</span><br><span class="line">        <span class="keyword">if</span> (mark[i] &lt;= q) ans = max(f[n][i], ans);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://hihocoder.com/problemset/problem/1044&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{hihoCoder - 1044 状态压缩一}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  火车上有&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个座位排成一排，第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;个座位上有数目&lt;span class=&quot;math inline&quot;&gt;\(w[i]\)&lt;/span&gt;的垃圾，你需要尽可能多的清扫这些垃圾，然而在连续&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;个座位上，你最多只能选取&lt;span class=&quot;math inline&quot;&gt;\(q\)&lt;/span&gt;个位置进行清扫，不然会让乘客不愉快，现在问你最多可以清扫多少数目的垃圾；&lt;/p&gt;
&lt;p&gt;  输入格式：输入包含一组样例，第一行三个数&lt;span class=&quot;math inline&quot;&gt;\(n,m,q\)&lt;/span&gt;，第二行&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个整数，第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;个为&lt;span class=&quot;math inline&quot;&gt;\(w[i]\)&lt;/span&gt;;&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(N\leq 1000,2\leq M\leq 10,1\leq q\leq m,w[i]\leq 100\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行代表最多可以清扫的垃圾数目；
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E7%8A%B6%E5%8E%8Bdp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>[POJ - 2411] Mondriaan&#39;s Dream</title>
    <link href="https://yuggu.github.io/2019/09/22/POJ-2411-Mondriaan-s-Dream/"/>
    <id>https://yuggu.github.io/2019/09/22/POJ-2411-Mondriaan-s-Dream/</id>
    <published>2019-09-22T06:17:51.000Z</published>
    <updated>2019-09-29T10:52:01.554Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="http://poj.org/problem?id=2411" target="_blank" rel="noopener"><span class="math inline">\(\text{POJ - 2411 Mondriaan&#39;s Dream}\)</span></a></p><h3 id="题意">题意</h3><p>  求把<span class="math inline">\(N\ast M\)</span>的棋盘分割成若干个<span class="math inline">\(1\ast 2\)</span>的长方形，有多少种方案。如<span class="math inline">\(N=2，M=4\)</span>，有<span class="math inline">\(5\)</span>种方案，<span class="math inline">\(N=2，M=3\)</span>有<span class="math inline">\(3\)</span>种方案： <img src="/images/poj2411_2.png" width="500px"></p><p>  输入格式：输入包含多组样例，每行一个样例，每个样例一行两个数<span class="math inline">\(N,M\)</span>.</p><p>  数据范围：<span class="math inline">\(1\leq N,M\leq 11\)</span>.</p><p>  输出格式：每个样例输出一行代表方案数。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  总共<span class="math inline">\(N\)</span>行<span class="math inline">\(M\)</span>列，考虑将每一列的长方形的摆放当作状态，第<span class="math inline">\(i\)</span>行即是第<span class="math inline">\(i\)</span>阶段；</p><p>  将长方形的状态定义为如下：</p><p><img src="/images/poj2411_1.png" width="400px"></p><p>  使用一个<span class="math inline">\(M\)</span>位二进制数，若第<span class="math inline">\(j(0\leq j&lt;M)\)</span>位为<span class="math inline">\(1\)</span>，则表示这个位置是一个竖着的长方形的上半部，为0则是其他情况，<span class="math inline">\(f[i][j]\)</span>表示第<span class="math inline">\(i\)</span>行的状态为<span class="math inline">\(j\)</span>时，前<span class="math inline">\(i\)</span>行分割方案的总数，当第<span class="math inline">\(i\)</span>的状态<span class="math inline">\(j\)</span>能向第<span class="math inline">\(i+1\)</span>行状态<span class="math inline">\(k\)</span>转移时，必有<span class="math inline">\((j\&amp;k)==0\)</span>，且<span class="math inline">\(j|k\)</span>的结果中每一段连续的<span class="math inline">\(0\)</span>都必须有偶数个</p><p>   我们可以从<span class="math inline">\([0,(1&lt;&lt;M)-1]\)</span>中预处理出并记录，二进制表示下连续的<span class="math inline">\(0\)</span>有偶数个的所有状态，记录在<span class="math inline">\(S\)</span>集合中。</p><p><span class="math display">\[f[i][j]=\sum_{j\&amp;k=0\space and\space j|k\in S} f[i-1][k]\]</span></p><p>  初始值<span class="math inline">\(f[0][0]=1\)</span>，其余为0，目标为<span class="math inline">\(f[N][0]\)</span>，复杂度为<span class="math inline">\(O(4^MN)\)</span>.</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> h, w;</span><br><span class="line">ll f[<span class="number">12</span>][<span class="number">1</span> &lt;&lt; <span class="number">12</span>], sta[<span class="number">1</span> &lt;&lt; <span class="number">12</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;h, &amp;w) != EOF) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!h || !w) <span class="keyword">break</span>;</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="built_in">memset</span>(sta, <span class="number">0</span>, <span class="keyword">sizeof</span>(sta));</span><br><span class="line">        <span class="comment">//预处理二进制表示下每一段连续的0都有偶数个的状态</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1</span> &lt;&lt; w; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> odd = <span class="number">0</span>, cnt = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; w; j++)</span><br><span class="line">                <span class="keyword">if</span> (i &gt;&gt; j &amp; <span class="number">1</span>) odd |= cnt, cnt = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">else</span> cnt ^= <span class="number">1</span>;</span><br><span class="line">            sta[i] = odd | cnt ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= h; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1</span> &lt;&lt; w; j++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">1</span> &lt;&lt; w; k++)</span><br><span class="line">                    <span class="keyword">if</span> (sta[j | k] &amp;&amp; (j &amp; k) == <span class="number">0</span>)</span><br><span class="line">                        f[i][k] += f[i - <span class="number">1</span>][j];</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; f[h][<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://poj.org/problem?id=2411&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{POJ - 2411 Mondriaan&amp;#39;s Dream}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  求把&lt;span class=&quot;math inline&quot;&gt;\(N\ast M\)&lt;/span&gt;的棋盘分割成若干个&lt;span class=&quot;math inline&quot;&gt;\(1\ast 2\)&lt;/span&gt;的长方形，有多少种方案。如&lt;span class=&quot;math inline&quot;&gt;\(N=2，M=4\)&lt;/span&gt;，有&lt;span class=&quot;math inline&quot;&gt;\(5\)&lt;/span&gt;种方案，&lt;span class=&quot;math inline&quot;&gt;\(N=2，M=3\)&lt;/span&gt;有&lt;span class=&quot;math inline&quot;&gt;\(3\)&lt;/span&gt;种方案： &lt;img src=&quot;/images/poj2411_2.png&quot; width=&quot;500px&quot;&gt;&lt;/p&gt;
&lt;p&gt;  输入格式：输入包含多组样例，每行一个样例，每个样例一行两个数&lt;span class=&quot;math inline&quot;&gt;\(N,M\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq N,M\leq 11\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：每个样例输出一行代表方案数。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E7%8A%B6%E5%8E%8Bdp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>[Shortest Hamilton path]</title>
    <link href="https://yuggu.github.io/2019/09/22/Shortest-Hamilton-path/"/>
    <id>https://yuggu.github.io/2019/09/22/Shortest-Hamilton-path/</id>
    <published>2019-09-22T05:25:38.000Z</published>
    <updated>2019-09-29T11:01:14.013Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://www.acwing.com/problem/content/93/" target="_blank" rel="noopener"><span class="math inline">\(\text{最短Hamilton路径}\)</span></a></p><h3 id="题意">题意</h3><p>  给定一张<span class="math inline">\(n\)</span>个点的带权无向图，点从<span class="math inline">\(0\)</span>到<span class="math inline">\(n-1\)</span>标号，求起点<span class="math inline">\(0\)</span>到终点<span class="math inline">\(n-1\)</span>的最短<span class="math inline">\(\text{Hamilton}\)</span>路径。 <span class="math inline">\(\text{Hamilton}\)</span>路径的定义是从<span class="math inline">\(0\)</span>到<span class="math inline">\(n-1\)</span>不重不漏地经过每个点恰好一次。</p><p>  输入格式：第一行一个整数<span class="math inline">\(n\)</span>，接下来一个<span class="math inline">\(n\times n\)</span>的矩阵<span class="math inline">\(a[i,j]\)</span>，代表图中点与点之间的关系;</p><p>  数据范围：<span class="math inline">\(1\leq n\leq 20,0\leq a[i,j]\leq 10^7\)</span>.</p><p>  输出格式：输出一个整数，表示最短<span class="math inline">\(\text{Hamilton}\)</span>路径的长度。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  首先很容易想到一种方法，枚举<span class="math inline">\(n\)</span>个点的排列，然后计算最小值，那么复杂度是<span class="math inline">\(O(n\ast n!)\)</span>，然而<span class="math inline">\(20!\)</span>大约是<span class="math inline">\(2e18\)</span>，显然不可行；之后不知什么人想出来一种比较巧妙的方法。</p><p>  考虑使用二进制表示状态，从一个点转移到另一个点，两个点之间的状态转移的差距，体现在二进制上仅仅是一位不同；</p><p>  使用一个<span class="math inline">\(n\)</span>位二进制数，若第<span class="math inline">\(i(0\leq i&lt; n)\)</span>位为<span class="math inline">\(1\)</span>，则表示第<span class="math inline">\(i\)</span>个点已经被访问过了，反之未被访问过，在任意时刻还需要知道当前所在的位置，所以使用<span class="math inline">\(f[i,j](0\leq i&lt;2^n,0\leq j&lt;n)\)</span>表示点被经过的状态对应的二进制数为<span class="math inline">\(i\)</span>，且目前处于点<span class="math inline">\(j\)</span>时的最短路径。</p><p>  在起点<span class="math inline">\(0\)</span>时，有<span class="math inline">\(f[1][0]=0\)</span>(<span class="math inline">\(0\)</span>点的状态是<span class="math inline">\(1\)</span>)，其他设为<span class="math inline">\(\infty\)</span>，目标是<span class="math inline">\(f[(1&lt;&lt; n)-1][n-1]\)</span>，即经过所有点(<span class="math inline">\(i\)</span>的所有位都为<span class="math inline">\(1\)</span>)，并且最终位于<span class="math inline">\(n-1\)</span>位置，动态转移方程为： <span class="math display">\[f[i][j]=\min{f[i\space xor(1 &lt;&lt; j)][k]+weight[k][j]}\]</span>   枚举当前的位置和当前位置的前一个位置，复杂度为<span class="math inline">\(O(n^2 \ast 2^n)\)</span>.</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, f[(<span class="number">1</span> &lt;&lt; <span class="number">21</span>) - <span class="number">1</span>][<span class="number">25</span>], e[<span class="number">25</span>][<span class="number">25</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f, INF, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                e[i][j] = read();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">1</span> &lt;&lt; n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                <span class="keyword">if</span> (i &gt;&gt; j &amp; <span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; k++) </span><br><span class="line">                        <span class="keyword">if</span> (i &gt;&gt; k &amp; <span class="number">1</span>)</span><br><span class="line">                            f[i][j] = min(f[i][j], f[i ^ <span class="number">1</span> &lt;&lt; j][k] + e[j][k]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d"</span>, f[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>][n - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.acwing.com/problem/content/93/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{最短Hamilton路径}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  给定一张&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个点的带权无向图，点从&lt;span class=&quot;math inline&quot;&gt;\(0\)&lt;/span&gt;到&lt;span class=&quot;math inline&quot;&gt;\(n-1\)&lt;/span&gt;标号，求起点&lt;span class=&quot;math inline&quot;&gt;\(0\)&lt;/span&gt;到终点&lt;span class=&quot;math inline&quot;&gt;\(n-1\)&lt;/span&gt;的最短&lt;span class=&quot;math inline&quot;&gt;\(\text{Hamilton}\)&lt;/span&gt;路径。 &lt;span class=&quot;math inline&quot;&gt;\(\text{Hamilton}\)&lt;/span&gt;路径的定义是从&lt;span class=&quot;math inline&quot;&gt;\(0\)&lt;/span&gt;到&lt;span class=&quot;math inline&quot;&gt;\(n-1\)&lt;/span&gt;不重不漏地经过每个点恰好一次。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行一个整数&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;，接下来一个&lt;span class=&quot;math inline&quot;&gt;\(n\times n\)&lt;/span&gt;的矩阵&lt;span class=&quot;math inline&quot;&gt;\(a[i,j]\)&lt;/span&gt;，代表图中点与点之间的关系;&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq n\leq 20,0\leq a[i,j]\leq 10^7\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一个整数，表示最短&lt;span class=&quot;math inline&quot;&gt;\(\text{Hamilton}\)&lt;/span&gt;路径的长度。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E7%8A%B6%E5%8E%8Bdp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="状压dp" scheme="https://yuggu.github.io/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>Network Fundamentals</title>
    <link href="https://yuggu.github.io/2019/09/21/Network-Fundamentals/"/>
    <id>https://yuggu.github.io/2019/09/21/Network-Fundamentals/</id>
    <published>2019-09-21T10:23:42.000Z</published>
    <updated>2019-09-22T05:31:23.345Z</updated>
    
    <content type="html"><![CDATA[<h3 id="主机与服务器">主机与服务器</h3><p>  <strong>网络主机</strong>（<strong>network host</strong>）是已连接到一个<a href="https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C" title="计算机网络" target="_blank" rel="noopener">计算机网络</a>的一台<a href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E5%AD%90%E8%A8%88%E7%AE%97%E6%A9%9F" title="电子计算机" target="_blank" rel="noopener">电子计算机</a>或其他设备。网络主机可以向网络上的用户或其他<a href="https://zh.wikipedia.org/wiki/%E8%8A%82%E7%82%B9_(%E7%94%B5%E4%BF%A1%E7%BD%91%E7%BB%9C)" title="节点 (电信网络)" target="_blank" rel="noopener">节点</a>提供信息资源、服务和应用。一台网络主机是已被分配一个<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E5%B1%82" title="网络层" target="_blank" rel="noopener">网络层</a><a href="https://zh.wikipedia.org/w/index.php?title=%E4%B8%BB%E6%9C%BA%E5%9C%B0%E5%9D%80&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener">主机地址</a>的网络节点。</p><p>  所有服务器都是主机，但并非所有主机都是服务器，任何与网络建立连接的设备都可以作为主机，而已接受其他设备连接为目的的主机被视作服务器。 <a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;主机与服务器&quot;&gt;主机与服务器&lt;/h3&gt;
&lt;p&gt;  &lt;strong&gt;网络主机&lt;/strong&gt;（&lt;strong&gt;network host&lt;/strong&gt;）是已连接到一个&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C&quot; title=&quot;计算机网络&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;计算机网络&lt;/a&gt;的一台&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E9%9B%BB%E5%AD%90%E8%A8%88%E7%AE%97%E6%A9%9F&quot; title=&quot;电子计算机&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;电子计算机&lt;/a&gt;或其他设备。网络主机可以向网络上的用户或其他&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E8%8A%82%E7%82%B9_(%E7%94%B5%E4%BF%A1%E7%BD%91%E7%BB%9C)&quot; title=&quot;节点 (电信网络)&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;节点&lt;/a&gt;提供信息资源、服务和应用。一台网络主机是已被分配一个&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E5%B1%82&quot; title=&quot;网络层&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;网络层&lt;/a&gt;&lt;a href=&quot;https://zh.wikipedia.org/w/index.php?title=%E4%B8%BB%E6%9C%BA%E5%9C%B0%E5%9D%80&amp;amp;action=edit&amp;amp;redlink=1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;主机地址&lt;/a&gt;的网络节点。&lt;/p&gt;
&lt;p&gt;  所有服务器都是主机，但并非所有主机都是服务器，任何与网络建立连接的设备都可以作为主机，而已接受其他设备连接为目的的主机被视作服务器。
    
    </summary>
    
      <category term="Networks" scheme="https://yuggu.github.io/categories/Networks/"/>
    
      <category term="Fundmentals" scheme="https://yuggu.github.io/categories/Networks/Fundmentals/"/>
    
    
      <category term="network" scheme="https://yuggu.github.io/tags/network/"/>
    
      <category term="主机" scheme="https://yuggu.github.io/tags/%E4%B8%BB%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>hexo背景图片及透明度修改</title>
    <link href="https://yuggu.github.io/2019/09/15/hexo%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E5%8F%8A%E9%80%8F%E6%98%8E%E5%BA%A6%E4%BF%AE%E6%94%B9/"/>
    <id>https://yuggu.github.io/2019/09/15/hexo背景图片及透明度修改/</id>
    <published>2019-09-15T13:20:13.000Z</published>
    <updated>2019-09-15T13:27:11.516Z</updated>
    
    <content type="html"><![CDATA[<h3 id="hexo添加背景图片及修改透明度">hexo添加背景图片及修改透明度</h3><p>  首先将背景图片放入<code>hexo\next\source\images</code>文件夹下，之后修改<code>hexo\themes\next\source\css\_custom\custom.styl</code>文件，在程序中加入下面的代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*这里是加载背景图片，以及设置一些图片加载的问题*/</span></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"><span class="comment">/*url括号里的图片如果不是本地的，就直接写url*/</span></span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">url</span>(/images/background.jpg)</span><br><span class="line">background-repeat: no-repeat;  </span><br><span class="line"><span class="attribute">background-attachment</span>:fixed;  </span><br><span class="line"><span class="attribute">background-position</span>:<span class="number">50%</span> <span class="number">50%</span>;  </span><br><span class="line"><span class="attribute">background-size</span>: cover;  </span><br><span class="line"><span class="attribute">-webkit-background-size</span>: cover;  </span><br><span class="line"><span class="attribute">-o-background-size</span>: cover;  </span><br><span class="line"><span class="attribute">-moz-background-size</span>: cover;  </span><br><span class="line"><span class="attribute">-ms-background-size</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*这里的opacity参数是修改透明度的，值越小，透明度越大*/</span></span><br><span class="line"><span class="selector-class">.header-inner</span>&#123;</span><br><span class="line"><span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main-inner</span> &#123; </span><br><span class="line">   // margin-top: 60px;</span><br><span class="line">   // padding: 60px 60px 60px 60px;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">opacity</span>: 0<span class="selector-class">.8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;hexo添加背景图片及修改透明度&quot;&gt;hexo添加背景图片及修改透明度&lt;/h3&gt;
&lt;p&gt;  首先将背景图片放入&lt;code&gt;hexo\next\source\images&lt;/code&gt;文件夹下，之后修改&lt;code&gt;hexo\themes\next\source\css\_custom\custom.styl&lt;/code&gt;文件，在程序中加入下面的代码&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*这里是加载背景图片，以及设置一些图片加载的问题*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;body&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;/*url括号里的图片如果不是本地的，就直接写url*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;background&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;url&lt;/span&gt;(/images/background.jpg)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	background-repeat: no-repeat;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;background-attachment&lt;/span&gt;:fixed;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;background-position&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50%&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50%&lt;/span&gt;;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;background-size&lt;/span&gt;: cover;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;-webkit-background-size&lt;/span&gt;: cover;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;-o-background-size&lt;/span&gt;: cover;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;-moz-background-size&lt;/span&gt;: cover;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;-ms-background-size&lt;/span&gt;: cover;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*这里的opacity参数是修改透明度的，值越小，透明度越大*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-class&quot;&gt;.header-inner&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0.8&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-class&quot;&gt;.main-inner&lt;/span&gt; &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   // margin-top: 60px;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   // padding: 60px 60px 60px 60px;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;selector-tag&quot;&gt;opacity&lt;/span&gt;: 0&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="博客搭建" scheme="https://yuggu.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="其他" scheme="https://yuggu.github.io/tags/%E5%85%B6%E4%BB%96/"/>
    
      <category term="hexo" scheme="https://yuggu.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>[POJ - 1155] TELE</title>
    <link href="https://yuggu.github.io/2019/09/13/POJ-1155-TELE/"/>
    <id>https://yuggu.github.io/2019/09/13/POJ-1155-TELE/</id>
    <published>2019-09-13T05:01:41.000Z</published>
    <updated>2019-09-22T07:04:13.911Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="http://poj.org/problem?id=1155" target="_blank" rel="noopener"><span class="math inline">\(\text{POJ - 1155 TELE}\)</span></a></p><h3 id="题意">题意</h3><p>  这里有<span class="math inline">\(m\)</span>个用户想要使用电视，然而它们需要电视网络信号进行传播信号，整个电视网络由信号发射器和用户组成，它的形状是一棵树，用户是叶子结点，现在给出了连接发射器与发射器或用户之间的信号所需要花费的金钱，<span class="math inline">\(m\)</span>个用户每个用户使用电视都会支付一些金钱，问可以观看电视的用户的数量最大是多少，以致电视网络的搭建不会亏损金钱；整颗树共<span class="math inline">\(n\)</span>个节点，</p><p>  输入格式：第一行两个整数<span class="math inline">\(n,m\)</span>，表示树中结点个数和叶子结点个数，树根一定是1，其他发射器编号从2到<span class="math inline">\(n-m\)</span>，用户即叶子结点编号从<span class="math inline">\(n-m+1\)</span>到<span class="math inline">\(n\)</span>，接下来<span class="math inline">\(n-m\)</span>行，第<span class="math inline">\(i\)</span>行<code>K A1 C1...AK CK</code>，表示与<span class="math inline">\(i\)</span>个发射器相连接的结点有<span class="math inline">\(k\)</span>个，对应编号是<span class="math inline">\(a_j\)</span>，连接<span class="math inline">\(i\)</span>与<span class="math inline">\(a_j\)</span>需要花费的费用是<span class="math inline">\(c_j\)</span>，最后一行<span class="math inline">\(m\)</span>个整数，表示<span class="math inline">\(m\)</span>个用户使用电视会支付的金钱。</p><p>  数据范围：<span class="math inline">\(2\leq n\leq 3000,1\leq m\leq n-1\)</span>.</p><p>  输出格式：输出一行，表示电视网络搭建不亏损情况下，最多可以使用电视的用户的数量。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  对于某一棵子树，假设我们考虑他的亏损情况，如果它是亏损的我们就切掉它，那么这种想法显然是不正确的，如果他有兄弟结点，并且兄弟结点不亏损，那么它们的父亲的那颗子树，显然是未知的；</p><p>  我们换一种思路，考虑求出当前子树的最大收入，<span class="math inline">\(f[i][j]\)</span>表示在以<span class="math inline">\(i\)</span>为根节点的子树中选取<span class="math inline">\(j\)</span>个用户即<span class="math inline">\(j\)</span>个叶子节点的最大收入，之后我们求出了节点1的所有状态，那么我们它的状态，从<span class="math inline">\(m\)</span>到1，找到第一个满足<span class="math inline">\(f[1][j]\)</span>的<span class="math inline">\(j\)</span>即可，输出它。</p><p>  关于中间的细节，如果搜索到了叶子结点<span class="math inline">\(x\)</span>我们就记录<span class="math inline">\(f[x][1]=c[x]\)</span>，同时使用<span class="math inline">\(sz[i]\)</span>记录以<span class="math inline">\(i\)</span>为根的子树中包含的用户数量，在以<span class="math inline">\(i\)</span>为根的子树中进行背包，<span class="math inline">\(sz[i]\)</span>即为背包容量，在叶子结点<span class="math inline">\(x\)</span>显然有<span class="math inline">\(sz[x]=1\)</span>，对于<span class="math inline">\(f\)</span>初始化成<span class="math inline">\(-\infty\)</span>，每当我们搜索进入一个新节点<span class="math inline">\(x\)</span>我们就初始化<span class="math inline">\(f[x][0]=0\)</span>，回溯的时候进行背包即可。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 3005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, k, a[MAXN][MAXN], c[MAXN], f[MAXN][MAXN], sz[MAXN];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">    f[u][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (c[u]) &#123;</span><br><span class="line">        sz[u] = <span class="number">1</span>;</span><br><span class="line">        f[u][<span class="number">1</span>] = c[u];</span><br><span class="line">        <span class="comment">//cout &lt;&lt; c[u] &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec[u].size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = vec[u][i];</span><br><span class="line">        <span class="keyword">if</span> (v == fa) <span class="keyword">continue</span>; </span><br><span class="line">        dfs(v, u);</span><br><span class="line">        sz[u] += sz[v];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = sz[u]; j &gt; <span class="number">0</span>; j--)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= j; k++)</span><br><span class="line">                f[u][j] = max(f[u][j], f[u][j - k] + f[v][k] - a[u][v]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">memset</span>(f, -INF, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - m; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">        <span class="keyword">int</span> v, w;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= k; j++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; v &gt;&gt; w;</span><br><span class="line">            vec[i].push_back(v);</span><br><span class="line">            vec[v].push_back(i);</span><br><span class="line">            a[i][v] = a[v][i] = w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - m + <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; c[i];</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (f[<span class="number">1</span>][i] &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; i;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://poj.org/problem?id=1155&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{POJ - 1155 TELE}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  这里有&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;个用户想要使用电视，然而它们需要电视网络信号进行传播信号，整个电视网络由信号发射器和用户组成，它的形状是一棵树，用户是叶子结点，现在给出了连接发射器与发射器或用户之间的信号所需要花费的金钱，&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;个用户每个用户使用电视都会支付一些金钱，问可以观看电视的用户的数量最大是多少，以致电视网络的搭建不会亏损金钱；整颗树共&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个节点，&lt;/p&gt;
&lt;p&gt;  输入格式：第一行两个整数&lt;span class=&quot;math inline&quot;&gt;\(n,m\)&lt;/span&gt;，表示树中结点个数和叶子结点个数，树根一定是1，其他发射器编号从2到&lt;span class=&quot;math inline&quot;&gt;\(n-m\)&lt;/span&gt;，用户即叶子结点编号从&lt;span class=&quot;math inline&quot;&gt;\(n-m+1\)&lt;/span&gt;到&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;，接下来&lt;span class=&quot;math inline&quot;&gt;\(n-m\)&lt;/span&gt;行，第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;行&lt;code&gt;K A1 C1...AK CK&lt;/code&gt;，表示与&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;个发射器相连接的结点有&lt;span class=&quot;math inline&quot;&gt;\(k\)&lt;/span&gt;个，对应编号是&lt;span class=&quot;math inline&quot;&gt;\(a_j\)&lt;/span&gt;，连接&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;与&lt;span class=&quot;math inline&quot;&gt;\(a_j\)&lt;/span&gt;需要花费的费用是&lt;span class=&quot;math inline&quot;&gt;\(c_j\)&lt;/span&gt;，最后一行&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;个整数，表示&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;个用户使用电视会支付的金钱。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(2\leq n\leq 3000,1\leq m\leq n-1\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行，表示电视网络搭建不亏损情况下，最多可以使用电视的用户的数量。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="树形dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E6%A0%91%E5%BD%A2dp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="树形背包" scheme="https://yuggu.github.io/tags/%E6%A0%91%E5%BD%A2%E8%83%8C%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>[UVA-1292-Strategic] game</title>
    <link href="https://yuggu.github.io/2019/09/12/UVA-1292-Strategic-game/"/>
    <id>https://yuggu.github.io/2019/09/12/UVA-1292-Strategic-game/</id>
    <published>2019-09-12T13:37:08.000Z</published>
    <updated>2019-09-20T11:07:10.297Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=4038" target="_blank" rel="noopener"><span class="math inline">\(\text{UVA - 1292 Strategic game}\)</span></a></p><h3 id="题意">题意</h3><p>  <span class="math inline">\(\text{Bob}\)</span>在玩一款策略游戏，它需要保卫一个城市，很多道路将城市连起来，整体看起来像一棵树，<span class="math inline">\(\text{Bob}\)</span>希望放置尽可能少的士兵到一些城市，包围连接这个城市的道路，士兵只能放在城市上即树的节点上，他可以保护与这个节点相邻的边。</p><p>  输入格式：多组测试样例，每个测试样例的第一行一个整数<span class="math inline">\(n\)</span>，表示城市个数，之后<span class="math inline">\(n\)</span>行每行输入一个城市的信息<code>x:(number) a1,a2...</code>，表示与<span class="math inline">\(x\)</span>城市直接连接的城市有<span class="math inline">\(number\)</span>个，分别为<span class="math inline">\(a_1,a_2,...,a_{number}\)</span></p><p>  数据范围：<span class="math inline">\(0\leq n\leq 1500\)</span>.</p><p>  输出格式：输出一行，表示所需要放置的士兵的最小数量。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  这是一个比较简单的树形<span class="math inline">\(dp\)</span>。</p><p>  对于一棵树的<span class="math inline">\(x\)</span>节点来说，如果它不放士兵的话，那么它的每一个子节点<span class="math inline">\(y_i\)</span>都需要放士兵，如果它放士兵的话，那么它的任意一个子节点<span class="math inline">\(y_i\)</span>，可能放士兵也可以不妨士兵。所以我们就得到了动态转移方程： <span class="math display">\[\begin{cases}f[u][1]+=\min(f[v][0],f[v][1])\\f[u][0]+=f[v][1] \end{cases}v\in Son(u)\]</span></p><p>  <span class="math inline">\(f[i][1]\)</span>表示在以<span class="math inline">\(i\)</span>为根的子树中，如果<span class="math inline">\(i\)</span>节点放士兵，所需要放置的最小士兵数量，<span class="math inline">\(f[i][0]\)</span>表示在以<span class="math inline">\(i\)</span>为根的子树中，如果<span class="math inline">\(i\)</span>节点不放士兵，所需要放置的最小士兵数量；并且开始的时候，<span class="math inline">\(f[i][1]=1,f[i][0]=0\)</span>.</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1505</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> cnt, n, vis[MAXN], f[MAXN][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">char</span> a, b, c;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    f[u][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec[u].size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = vec[u][i];</span><br><span class="line">        dfs(v);</span><br><span class="line">        f[u][<span class="number">1</span>] += min(f[v][<span class="number">0</span>], f[v][<span class="number">1</span>]);</span><br><span class="line">        f[u][<span class="number">0</span>] += f[v][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="keyword">int</span> u, v;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            vec[i].clear();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%c%c%d%c"</span>, &amp;u, &amp;a, &amp;b, &amp;cnt, &amp;c);</span><br><span class="line">            <span class="comment">//cout &lt;&lt; u &lt;&lt; " " &lt;&lt; a &lt;&lt; " " &lt;&lt; b &lt;&lt; " " &lt;&lt; cnt &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;v);</span><br><span class="line">                <span class="comment">//cout &lt;&lt; v &lt;&lt; endl;</span></span><br><span class="line">                vec[u].push_back(v);</span><br><span class="line">                vis[v] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="keyword">if</span>(!vis[i])&#123;</span><br><span class="line">                root = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        dfs(root);</span><br><span class="line">        <span class="comment">//cout &lt;&lt; "\t" &lt;&lt; 1 &lt;&lt; endl;</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; min(f[root][<span class="number">0</span>], f[root][<span class="number">1</span>]) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;amp;Itemid=8&amp;amp;page=show_problem&amp;amp;problem=4038&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{UVA - 1292 Strategic game}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  &lt;span class=&quot;math inline&quot;&gt;\(\text{Bob}\)&lt;/span&gt;在玩一款策略游戏，它需要保卫一个城市，很多道路将城市连起来，整体看起来像一棵树，&lt;span class=&quot;math inline&quot;&gt;\(\text{Bob}\)&lt;/span&gt;希望放置尽可能少的士兵到一些城市，包围连接这个城市的道路，士兵只能放在城市上即树的节点上，他可以保护与这个节点相邻的边。&lt;/p&gt;
&lt;p&gt;  输入格式：多组测试样例，每个测试样例的第一行一个整数&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;，表示城市个数，之后&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;行每行输入一个城市的信息&lt;code&gt;x:(number) a1,a2...&lt;/code&gt;，表示与&lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt;城市直接连接的城市有&lt;span class=&quot;math inline&quot;&gt;\(number\)&lt;/span&gt;个，分别为&lt;span class=&quot;math inline&quot;&gt;\(a_1,a_2,...,a_{number}\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(0\leq n\leq 1500\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行，表示所需要放置的士兵的最小数量。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="树形dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E6%A0%91%E5%BD%A2dp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="树形dp" scheme="https://yuggu.github.io/tags/%E6%A0%91%E5%BD%A2dp/"/>
    
  </entry>
  
  <entry>
    <title>[Luogu-P1122] 最大子树和</title>
    <link href="https://yuggu.github.io/2019/09/12/Luogu-P1122-%E6%9C%80%E5%A4%A7%E5%AD%90%E6%A0%91%E5%92%8C/"/>
    <id>https://yuggu.github.io/2019/09/12/Luogu-P1122-最大子树和/</id>
    <published>2019-09-12T12:06:19.000Z</published>
    <updated>2019-09-20T11:27:27.115Z</updated>
    
    <content type="html"><![CDATA[<h4 id="链接">链接</h4><p><a href="https://www.luogu.org/problem/P1122" target="_blank" rel="noopener"><span class="math inline">\(\text{Luogu - P1122 最大子树和}\)</span></a></p><h4 id="题意">题意</h4><p>  这里有一株花卉，上面共<span class="math inline">\(n\)</span>朵花，共<span class="math inline">\(n-1\)</span>条枝干将花儿连在一起，每朵花都有一个美丽指数，数越大说明花越漂亮，也有美丽指数为负的，现在你需要取修剪这株花卉，修剪意味：去掉其中一条枝条，这样就得到了两株，然后丢掉其中一株，继续修剪；最后还剩下一株花，现在你需要修剪最初的花卉，使得最终剩下的一株花卉上所有花朵的美丽指数之和最大。</p><p>  输入格式：第一行一个整数<span class="math inline">\(n\)</span>，<span class="math inline">\(n\)</span>表示初始花卉上花朵的数量，第二行<span class="math inline">\(n\)</span>个整数，其中第<span class="math inline">\(i\)</span>个表示第<span class="math inline">\(i\)</span>朵花的美丽指数，接下来<span class="math inline">\(n-1\)</span>行，每行两个整数<span class="math inline">\(a、b\)</span>，表示存在一条连接第<span class="math inline">\(a\)</span>朵花和第<span class="math inline">\(b\)</span>朵花的枝条。</p><p>  数据范围：<span class="math inline">\(1\leq n\leq 16000\)</span>.</p><p>  输出格式：输出一行，修剪后得到的美丽指数之和的最大值，保证绝对值不超过2147483647. <a id="more"></a></p><h4 id="分析">分析</h4><p>  开始，我们需要考虑作为树形<span class="math inline">\(dp\)</span>的树根是谁。</p><p>  后来发现不需要考虑这个问题</p><p><img src="https://img-blog.csdnimg.cn/20190912194718103.png" width="300"></p><p>  对于如图的一棵树，我们最后得到的结果是方框中的部分，左下角的2和右下角的3以及右上角的3都被切掉了。那么我们可以考虑在<span class="math inline">\(dp\)</span>的过程中进行切的操作。</p><p>  使用<span class="math inline">\(f[i]\)</span>，表示在以<span class="math inline">\(i\)</span>为根的子树中进行修剪的操作能获得花卉所有花朵美丽指数之和的最大值，其中保留根<span class="math inline">\(i\)</span>，那么显然，无论以谁为根进行修剪，在修剪过程中，总有以某个结点为子树根能获得最大的美丽指数之和，当我们搜索到一个节点<span class="math inline">\(x\)</span>，我们遍历它的子树<span class="math inline">\(y_i\)</span>，我们已经获得了他的子树的所有结果，那么我们显然可以考虑把<span class="math inline">\(y_i\)</span>的子树部分的答案，切掉或者不切掉，如果它的子树的答案是负的，那么我们显然是不能选它的，只有为正时才选它。所以有： <span class="math display">\[f[u]+=\max(0,f[v])\space v\in Son(u)\]</span></p><h4 id="代码">代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 16005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, a, b, va[MAXN], sz[MAXN];</span><br><span class="line">ll res, f[MAXN];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">    f[u] = va[u];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec[u].size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = vec[u][i];</span><br><span class="line">        <span class="keyword">if</span> (v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(v, u);</span><br><span class="line">        f[u] += max(<span class="number">1l</span>l * <span class="number">0</span>, f[v]);</span><br><span class="line">    &#125;</span><br><span class="line">    res = max(res, f[u]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;va[i]);</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        vec[a].push_back(b);</span><br><span class="line">        vec[b].push_back(a);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;链接&quot;&gt;链接&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://www.luogu.org/problem/P1122&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{Luogu - P1122 最大子树和}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;题意&quot;&gt;题意&lt;/h4&gt;
&lt;p&gt;  这里有一株花卉，上面共&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;朵花，共&lt;span class=&quot;math inline&quot;&gt;\(n-1\)&lt;/span&gt;条枝干将花儿连在一起，每朵花都有一个美丽指数，数越大说明花越漂亮，也有美丽指数为负的，现在你需要取修剪这株花卉，修剪意味：去掉其中一条枝条，这样就得到了两株，然后丢掉其中一株，继续修剪；最后还剩下一株花，现在你需要修剪最初的花卉，使得最终剩下的一株花卉上所有花朵的美丽指数之和最大。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行一个整数&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;，&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;表示初始花卉上花朵的数量，第二行&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个整数，其中第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;个表示第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;朵花的美丽指数，接下来&lt;span class=&quot;math inline&quot;&gt;\(n-1\)&lt;/span&gt;行，每行两个整数&lt;span class=&quot;math inline&quot;&gt;\(a、b\)&lt;/span&gt;，表示存在一条连接第&lt;span class=&quot;math inline&quot;&gt;\(a\)&lt;/span&gt;朵花和第&lt;span class=&quot;math inline&quot;&gt;\(b\)&lt;/span&gt;朵花的枝条。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq n\leq 16000\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行，修剪后得到的美丽指数之和的最大值，保证绝对值不超过2147483647.
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="树形dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E6%A0%91%E5%BD%A2dp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="树形dp" scheme="https://yuggu.github.io/tags/%E6%A0%91%E5%BD%A2dp/"/>
    
  </entry>
  
  <entry>
    <title>[Luogu-P2015] 二叉苹果树</title>
    <link href="https://yuggu.github.io/2019/09/12/Luogu-P2015-%E4%BA%8C%E5%8F%89%E8%8B%B9%E6%9E%9C%E6%A0%91/"/>
    <id>https://yuggu.github.io/2019/09/12/Luogu-P2015-二叉苹果树/</id>
    <published>2019-09-12T05:10:51.000Z</published>
    <updated>2019-09-14T11:24:06.487Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://www.luogu.org/problem/P2015" target="_blank" rel="noopener"><span class="math inline">\(\text{Luogu-P2015 二叉苹果树}\)</span></a></p><h3 id="题意">题意</h3><p>  有一棵苹果树，若树枝分叉，则一定分2叉，即没有只有一个子节点的节点，这棵树共<span class="math inline">\(n\)</span>个节点，编号为1-<span class="math inline">\(n\)</span>，树根为1。我们用一根树枝两端连接的节点的编号表示一根树枝的位置，下面是一个有四个树枝的树； <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2   5</span><br><span class="line"> \ / </span><br><span class="line">  3   4</span><br><span class="line">   \ /</span><br><span class="line">    1</span><br></pre></td></tr></table></figure></p><p>  现在它的枝条太多了，需要剪枝，但是每个树枝上都长有一些苹果，给定需要保留的树枝数量，求最多能留住多少苹果。</p><p>  输入格式：第一行两个整数<span class="math inline">\(n,q\)</span>，<span class="math inline">\(n\)</span>表示树的节点数，<span class="math inline">\(q\)</span>表示需要保留的树枝数量，接下来<span class="math inline">\(n-1\)</span>行描述树枝的信息，每行三个数，前两个是它连接的结点，第三个是这跟树枝上苹果的数量，每根树枝上的苹果不超过30000个。</p><p>  数据范围：<span class="math inline">\(1\leq q\leq n,1&lt; n\leq 100\)</span>.</p><p>  输出格式：输出一行，最多能留住的苹果的个数。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  这是一个树形背包的经典入门题。</p><p>  设<span class="math inline">\(dp[x][t]\)</span>表示在以<span class="math inline">\(x\)</span>为根的子树中选取<span class="math inline">\(t\)</span>个树枝，能获得的最多的苹果，<span class="math inline">\(x\)</span>有两个子节点，如果沿一个子节点<span class="math inline">\(a\)</span>中选了<span class="math inline">\(k\)</span>个树枝(<span class="math inline">\(k\)</span>个包括<span class="math inline">\(x\)</span>与<span class="math inline">\(a\)</span>之间的这个树枝)，那么另沿着一个子节点<span class="math inline">\(b\)</span>则一定选了<span class="math inline">\(t-k-1\)</span>个树枝(不包括<span class="math inline">\(b\)</span>与<span class="math inline">\(x\)</span>之间的这个树枝)，则动态转移方程为： <span class="math display">\[f[u][i]=\max_{0\leq j \leq i}(f[u][i],f[u][i−j−1]+f[v][j]+a[u][v])\]</span></p><p>  细节见程序。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 2000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, q, f[<span class="number">105</span>][<span class="number">105</span>], a[<span class="number">105</span>][<span class="number">105</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec[<span class="number">305</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec[u].size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = vec[u][i];</span><br><span class="line">        <span class="keyword">if</span> (v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(v, u);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = q; j &gt; <span class="number">0</span>; j--)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; j; k++)&#123;</span><br><span class="line">                f[u][j] = max(f[u][j], f[u][j - k - <span class="number">1</span>] + f[v][k] + a[u][v]);</span><br><span class="line">                <span class="comment">//cout &lt;&lt; u &lt;&lt; " " &lt;&lt; j &lt;&lt; " " &lt;&lt; f[u][j] &lt;&lt; endl;</span></span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="keyword">int</span> u, v, w;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        vec[u].push_back(v);</span><br><span class="line">        vec[v].push_back(u);</span><br><span class="line">        a[u][v] += w;</span><br><span class="line">        a[v][u] += w;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//for (int i = 1; i &lt;= n; i++)</span></span><br><span class="line">    <span class="comment">//    cout &lt;&lt; i &lt;&lt; " " &lt;&lt; f[i][1] &lt;&lt; endl;</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f[<span class="number">1</span>][q] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.luogu.org/problem/P2015&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{Luogu-P2015 二叉苹果树}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  有一棵苹果树，若树枝分叉，则一定分2叉，即没有只有一个子节点的节点，这棵树共&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个节点，编号为1-&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;，树根为1。我们用一根树枝两端连接的节点的编号表示一根树枝的位置，下面是一个有四个树枝的树； &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;2   5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; \ / &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  3   4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   \ /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;  现在它的枝条太多了，需要剪枝，但是每个树枝上都长有一些苹果，给定需要保留的树枝数量，求最多能留住多少苹果。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行两个整数&lt;span class=&quot;math inline&quot;&gt;\(n,q\)&lt;/span&gt;，&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;表示树的节点数，&lt;span class=&quot;math inline&quot;&gt;\(q\)&lt;/span&gt;表示需要保留的树枝数量，接下来&lt;span class=&quot;math inline&quot;&gt;\(n-1\)&lt;/span&gt;行描述树枝的信息，每行三个数，前两个是它连接的结点，第三个是这跟树枝上苹果的数量，每根树枝上的苹果不超过30000个。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq q\leq n,1&amp;lt; n\leq 100\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行，最多能留住的苹果的个数。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="树形dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E6%A0%91%E5%BD%A2dp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="树形背包" scheme="https://yuggu.github.io/tags/%E6%A0%91%E5%BD%A2%E8%83%8C%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>[Luogu-P2014] 选课</title>
    <link href="https://yuggu.github.io/2019/09/12/Luogu-P2014-%E9%80%89%E8%AF%BE/"/>
    <id>https://yuggu.github.io/2019/09/12/Luogu-P2014-选课/</id>
    <published>2019-09-12T03:57:27.000Z</published>
    <updated>2019-09-14T11:24:17.396Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://www.luogu.org/problem/P2014" target="_blank" rel="noopener"><span class="math inline">\(\text{Luogu-P2014 选课}\)</span></a></p><h3 id="题意">题意</h3><p>  这里有<span class="math inline">\(n\)</span>个课程，你需要从它们中选出一些来学习，然而有些课程必须在某些课程之前学习，如高等数学总是在其他课程之前学习。每门课程有个学分，对于一门课必须先修它的先修课才能再修它，你需要从这些课程里选择m门课程学习，问它能获得的最大学分。</p><p>  输入格式：第一行两个整数<span class="math inline">\(n,m\)</span>用空格隔开，接下来<span class="math inline">\(n\)</span>行，第<span class="math inline">\(i+1\)</span>包含两个整数<span class="math inline">\(k\)</span>和<span class="math inline">\(s\)</span>，<span class="math inline">\(k\)</span>表示第<span class="math inline">\(i\)</span>门课的直接先修课，<span class="math inline">\(s\)</span>表示第<span class="math inline">\(i\)</span>门课的学分，<span class="math inline">\(k=0\)</span>表示没有直接先修课。</p><p>  数据范围：<span class="math inline">\(1\leq n\leq 300,1\leq m\leq 300,1\leq k\leq n,1\leq s\leq 20\)</span>.</p><p>  输出格式：输出一行，选<span class="math inline">\(m\)</span>门课的最大得分。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  这是一个树形背包的经典入门题。</p><p>  没门课的先修课最多只有一个，所以课与课之前的先修关系构成了一棵树。我们构造一个虚拟节点0，对于那些没有先修课的课程，规定先修课为0，并且选0的学分为0，那么问题就转化成了，从这个以0为根节点的树中，选<span class="math inline">\(m+1\)</span>门课。</p><p>  设<span class="math inline">\(dp[x][t]\)</span>表示在以<span class="math inline">\(x\)</span>为根的子树中选取<span class="math inline">\(t\)</span>门课，能获得的最大学分，对于<span class="math inline">\(x\)</span>的每个子节点<span class="math inline">\(y_i\)</span>，我们可以在以<span class="math inline">\(y_i\)</span>为根的子树中选修若干门课<span class="math inline">\(c_i\)</span>，在满足<span class="math inline">\(\sum c_i=t-1\)</span>的基础上获得尽量多的学分。</p><p>  这即是一个分组背包，物品组数为<span class="math inline">\(x\)</span>子节点<span class="math inline">\(y_i\)</span>的个数，每组物品共<span class="math inline">\(t-1\)</span>个，背包体积为<span class="math inline">\(t-1\)</span>，第<span class="math inline">\(i\)</span>组第<span class="math inline">\(j\)</span>个物品体积为<span class="math inline">\(j\)</span>。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 2000005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, k, f[<span class="number">305</span>][<span class="number">305</span>], s[<span class="number">305</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec[<span class="number">305</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    f[u][<span class="number">1</span>] = s[u];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec[u].size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = vec[u][i];</span><br><span class="line">        dfs(v);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = m + <span class="number">1</span>; j &gt; <span class="number">0</span>; j--)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; j; k++)</span><br><span class="line">                f[u][j] = max(f[u][j], f[u][j - k] + f[v][k]);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//freopen("test.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("test.out", "w", stdout);</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; k &gt;&gt; s[i];</span><br><span class="line">        vec[k].push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f[<span class="number">0</span>][m + <span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.luogu.org/problem/P2014&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{Luogu-P2014 选课}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  这里有&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个课程，你需要从它们中选出一些来学习，然而有些课程必须在某些课程之前学习，如高等数学总是在其他课程之前学习。每门课程有个学分，对于一门课必须先修它的先修课才能再修它，你需要从这些课程里选择m门课程学习，问它能获得的最大学分。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行两个整数&lt;span class=&quot;math inline&quot;&gt;\(n,m\)&lt;/span&gt;用空格隔开，接下来&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;行，第&lt;span class=&quot;math inline&quot;&gt;\(i+1\)&lt;/span&gt;包含两个整数&lt;span class=&quot;math inline&quot;&gt;\(k\)&lt;/span&gt;和&lt;span class=&quot;math inline&quot;&gt;\(s\)&lt;/span&gt;，&lt;span class=&quot;math inline&quot;&gt;\(k\)&lt;/span&gt;表示第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;门课的直接先修课，&lt;span class=&quot;math inline&quot;&gt;\(s\)&lt;/span&gt;表示第&lt;span class=&quot;math inline&quot;&gt;\(i\)&lt;/span&gt;门课的学分，&lt;span class=&quot;math inline&quot;&gt;\(k=0\)&lt;/span&gt;表示没有直接先修课。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq n\leq 300,1\leq m\leq 300,1\leq k\leq n,1\leq s\leq 20\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：输出一行，选&lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt;门课的最大得分。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/"/>
    
      <category term="树形dp" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/dp/%E6%A0%91%E5%BD%A2dp/"/>
    
    
      <category term="算法" scheme="https://yuggu.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="树形背包" scheme="https://yuggu.github.io/tags/%E6%A0%91%E5%BD%A2%E8%83%8C%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>[2019银川网络赛-L] Continuous Intervals</title>
    <link href="https://yuggu.github.io/2019/09/10/2019%E9%93%B6%E5%B7%9D%E7%BD%91%E7%BB%9C%E8%B5%9B-L-Continuous-Intervals/"/>
    <id>https://yuggu.github.io/2019/09/10/2019银川网络赛-L-Continuous-Intervals/</id>
    <published>2019-09-10T13:00:39.000Z</published>
    <updated>2019-09-29T10:43:29.815Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://nanti.jisuanke.com/t/41384" target="_blank" rel="noopener"><span class="math inline">\(\text{2019银川网络赛-L.Continuous Intervals}\)</span></a></p><h3 id="题意">题意</h3><p>  给定一个长度为<span class="math inline">\(n\)</span>的正整数序列<span class="math inline">\(a\)</span>，对于一个<span class="math inline">\([l,r]\)</span>区间内排序后，区间内任意相邻两数的差的绝对值都小于1，这样的区间有多少个。</p><p>  输入格式：第一行一个<span class="math inline">\(t\)</span>，表示<span class="math inline">\(t\)</span>个样例，之后每个样例的第一行输入一个数<span class="math inline">\(n\)</span>，第二行<span class="math inline">\(n\)</span>个数表示序列<span class="math inline">\(a\)</span>。</p><p>  数据范围：<span class="math inline">\(1\leq n\leq 10^6,1\leq a_i\leq 10^9\)</span>.</p><p>  输出格式：对于每个查询操作，输出一行一个结果<code>Case #x: y</code>，表示第<span class="math inline">\(x\)</span>个样例的结果是<span class="math inline">\(y\)</span>。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  排序后的区间任意相邻两数的差小于等于1，<span class="math inline">\(max、min\)</span>为区间最大值、最小值，<span class="math inline">\(cnt\)</span>为区间数的种类，那么显然的，任意一个区间都有<span class="math inline">\(max-min-cnt\geq -1\)</span>，而对于此题来说即是要求满足<span class="math inline">\(max-min-cnt= -1\)</span>的区间的个数，我们可以枚举<span class="math inline">\(r\)</span>，求满足条件的<span class="math inline">\(l\)</span>的个数。</p><p>  我们可以用线段树动态的维护<span class="math inline">\(max-min-cnt\)</span>的最小值，以及这个最小值的个数；</p><p>  当枚举<span class="math inline">\(r\)</span>的过程中，我们需要考虑当前这个数<span class="math inline">\(a[x]\)</span>，对于<span class="math inline">\(max、min、cnt\)</span>产生的影响，即当<span class="math inline">\(a[x]\)</span>作为区间最大值，作为区间最小值所影响到的区间，以及<span class="math inline">\(a[x]\)</span>上一次出现到<span class="math inline">\(x\)</span>位置的区间内对<span class="math inline">\(cnt\)</span>的影响。</p><p>  使用两个单调栈能够求出<span class="math inline">\(a[x]\)</span>作为区间最大值，作为区间最小值所影响到的区间，在这个区间内进行修改<span class="math inline">\(max-min-cnt\)</span>，加上<span class="math inline">\(a[x]\)</span>带来的影响</p><p>  <a href="https://blog.csdn.net/Cassie_zkq/article/details/100388082" target="_blank" rel="noopener">https://blog.csdn.net/Cassie_zkq/article/details/100388082</a>这篇博客讲的比较清楚。</p><h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7f7f7f7f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 100005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 2</span></span><br><span class="line"><span class="comment">//#define MOD 99991</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MOD(a, b) a &gt;= b ? a % b + b : a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> fastIO &#123;</span><br><span class="line">    <span class="comment">//#define getchar() (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, 1&lt;&lt;22, stdin),</span></span><br><span class="line">    <span class="comment">// p1 == p2) ? EOF : *p1++) char buf[(1 &lt;&lt; 22)], *p1 = buf, *p2 = buf;</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c = getchar();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">                f = <span class="number">-1</span>;</span><br><span class="line">            c = getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">            x = x * <span class="number">10</span> + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">        <span class="keyword">return</span> x * f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="comment">// namespace fastIO</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> segment_Tree &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Tree</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> l, r, minm, lazy, sum;</span><br><span class="line">    &#125; tree[<span class="number">4</span> * MAXN];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lmin = tree[x &lt;&lt; <span class="number">1</span>].minm, rmin = tree[x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].minm;</span><br><span class="line">        <span class="keyword">int</span> lsum = tree[x &lt;&lt; <span class="number">1</span>].sum, rsum = tree[x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].sum;</span><br><span class="line">        tree[x].minm = <span class="built_in">std</span>::min(lmin, rmin);</span><br><span class="line">        <span class="keyword">if</span> (lmin == rmin)</span><br><span class="line">            tree[x].sum = lsum + rsum;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (lmin &lt; rmin)</span><br><span class="line">            tree[x].sum = lsum;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            tree[x].sum = rsum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lz = tree[x].lazy;</span><br><span class="line">        tree[x &lt;&lt; <span class="number">1</span>].lazy += lz, tree[x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].lazy += lz;</span><br><span class="line">        tree[x &lt;&lt; <span class="number">1</span>].minm += lz, tree[x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>].minm += lz;</span><br><span class="line">        tree[x].lazy = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">        tree[x].l = l, tree[x].r = r;</span><br><span class="line">        tree[x].minm = <span class="number">0</span>, tree[x].lazy = <span class="number">0</span>, tree[x].sum = r - l + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (l == r) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        build(x &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">        build(x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l1 = tree[x].l, r1 = tree[x].r;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= l1 &amp;&amp; r1 &lt;= r) &#123;</span><br><span class="line">            tree[x].minm += val;</span><br><span class="line">            tree[x].lazy += val;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = (l1 + r1) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        push_down(x);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= mid)</span><br><span class="line">            update(x &lt;&lt; <span class="number">1</span>, l, r, val);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; mid)</span><br><span class="line">            update(x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, l, r, val);</span><br><span class="line">        push_up(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*inline int query(int x, int l, int r) &#123;</span></span><br><span class="line"><span class="comment">        int le = tree[x].l, ri = tree[x].r;</span></span><br><span class="line"><span class="comment">        if (l &lt;= le &amp;&amp; ri &lt;= r) &#123;</span></span><br><span class="line"><span class="comment">            return tree[x].max;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        int mid  = (le + ri) &gt;&gt; 1;</span></span><br><span class="line"><span class="comment">        int maxm = 0;</span></span><br><span class="line"><span class="comment">        if (l &lt;= mid)</span></span><br><span class="line"><span class="comment">            maxm = max(maxm, query(x &lt;&lt; 1, l, r));</span></span><br><span class="line"><span class="comment">        if (r &gt; mid)</span></span><br><span class="line"><span class="comment">            maxm = max(maxm, query(x &lt;&lt; 1 | 1, l, r));</span></span><br><span class="line"><span class="comment">        return maxm;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">&#125;  <span class="comment">// namespace segment_Tree</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> fastIO;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> segment_Tree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, a[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> st1[<span class="number">100005</span>], st2[<span class="number">100005</span>], t1, t2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        t1 = <span class="number">0</span>, t2 = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pos;</span><br><span class="line">        build(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">            update(<span class="number">1</span>, <span class="number">1</span>, n, <span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">while</span> (t1 &amp;&amp; a[i] &gt; a[st1[t1]]) &#123;</span><br><span class="line">                update(<span class="number">1</span>, st1[t1 - <span class="number">1</span>] + <span class="number">1</span>, st1[t1], a[i] - a[st1[t1]]);</span><br><span class="line">                t1--;</span><br><span class="line">            &#125;</span><br><span class="line">            st1[++t1] = i;</span><br><span class="line">            <span class="keyword">while</span> (t2 &amp;&amp; a[i] &lt; a[st2[t2]]) &#123;</span><br><span class="line">                update(<span class="number">1</span>, st2[t2 - <span class="number">1</span>] + <span class="number">1</span>, st2[t2], a[st2[t2]] - a[i]);</span><br><span class="line">                t2--;</span><br><span class="line">            &#125;</span><br><span class="line">            st2[++t2] = i;</span><br><span class="line">            update(<span class="number">1</span>, pos[a[i]] + <span class="number">1</span>, i, <span class="number">-1</span>);</span><br><span class="line">            pos[a[i]] = i;</span><br><span class="line">            ans += <span class="number">1l</span>l * tree[<span class="number">1</span>].sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>, cnt, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://nanti.jisuanke.com/t/41384&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{2019银川网络赛-L.Continuous Intervals}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  给定一个长度为&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;的正整数序列&lt;span class=&quot;math inline&quot;&gt;\(a\)&lt;/span&gt;，对于一个&lt;span class=&quot;math inline&quot;&gt;\([l,r]\)&lt;/span&gt;区间内排序后，区间内任意相邻两数的差的绝对值都小于1，这样的区间有多少个。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行一个&lt;span class=&quot;math inline&quot;&gt;\(t\)&lt;/span&gt;，表示&lt;span class=&quot;math inline&quot;&gt;\(t\)&lt;/span&gt;个样例，之后每个样例的第一行输入一个数&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;，第二行&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;个数表示序列&lt;span class=&quot;math inline&quot;&gt;\(a\)&lt;/span&gt;。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq n\leq 10^6,1\leq a_i\leq 10^9\)&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;  输出格式：对于每个查询操作，输出一行一个结果&lt;code&gt;Case #x: y&lt;/code&gt;，表示第&lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt;个样例的结果是&lt;span class=&quot;math inline&quot;&gt;\(y\)&lt;/span&gt;。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="数据结构" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="线段树" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    
      <category term="思维" scheme="https://yuggu.github.io/tags/%E6%80%9D%E7%BB%B4/"/>
    
      <category term="线段树" scheme="https://yuggu.github.io/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
      <category term="单调栈" scheme="https://yuggu.github.io/tags/%E5%8D%95%E8%B0%83%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>[2019徐州网络赛-F] so easy</title>
    <link href="https://yuggu.github.io/2019/09/09/2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B-F-so-easy/"/>
    <id>https://yuggu.github.io/2019/09/09/2019徐州网络赛-F-so-easy/</id>
    <published>2019-09-09T14:48:48.000Z</published>
    <updated>2019-09-14T11:29:02.313Z</updated>
    
    <content type="html"><![CDATA[<h3 id="链接">链接</h3><p><a href="https://nanti.jisuanke.com/t/41384" target="_blank" rel="noopener"><span class="math inline">\(\text{2019徐州网络赛-B.so easy}\)</span></a></p><h3 id="题意">题意</h3><p>  现在，从下标1开始每个位置有一个点，需要你进行<span class="math inline">\(q\)</span>次操作，共两种，1. <span class="math inline">\((1,x)\)</span>为删除<span class="math inline">\(x\)</span>位置的点，2. <span class="math inline">\((2,x)\)</span>为查询<span class="math inline">\(x\)</span>的后面(包括<span class="math inline">\(x\)</span>位置)的第一个点的位置。</p><p>  输入格式：第一行输入两个数<span class="math inline">\(n\)</span>和<span class="math inline">\(q\)</span>，之后<span class="math inline">\(q\)</span>行每行一个操作。</p><p>  数据范围：<span class="math inline">\(1\leq x&lt; n&lt;10^9,1\leq q&lt;10^6\)</span></p><p>  输出格式：对于每个查询操作，输出一行一个结果。 <a id="more"></a></p><h3 id="分析">分析</h3><p>  这一题感觉出的不太好，对点离散后线段树或者树状数组都会<span class="math inline">\(\text{T}\)</span>，</p><p>  这题的标答是用并查集做的，初始化数<span class="math inline">\(x\)</span>查询的答案就是<span class="math inline">\(x\)</span>，删除<span class="math inline">\(x\)</span>之后答案就是<span class="math inline">\(find(x+1)\)</span>，使用<span class="math inline">\(unordered\_map\)</span>。</p><p>  这题我是这样做的；开始的时候删除数<span class="math inline">\(x\)</span>，那么使用两个<span class="math inline">\(unordered\_map，l和r\)</span>记录<span class="math inline">\(x\)</span>所在连续的被删除序列的左右端点，第一个删除的数<span class="math inline">\(x\)</span>有<span class="math inline">\(l[x]=x,r[x]=x\)</span>；</p><p>  考虑其他三种不特殊情况，在一个连续的被删除序列的右侧或者左侧，以及在两个连续的被删除序列的中间删除<span class="math inline">\(x\)</span>，那么我们分别讨论这三种情况，来更新<span class="math inline">\(x、x-1、x+1\)</span>以及最左端点（通过<span class="math inline">\(l[x-1]\)</span>获得）和最右端点（通过<span class="math inline">\(r[x+1]\)</span>获得）的<span class="math inline">\(l\)</span>和<span class="math inline">\(r\)</span>，虽然中间有些点没有更新到，但是当查询某个点的时候，我们可以记忆化搜索，或者，我们每次删除后都进行一次路径压缩，查询<span class="math inline">\(x\)</span>的时候可以<span class="math inline">\(O(1)\)</span>查询<span class="math inline">\(x\)</span>所在连续的被删除序列的最右边的那个已经被删除的点，那么这个点的右边一个点一定是没有被删除的。</p><p>  这题不能用<span class="math inline">\(map\)</span>，只能用<span class="math inline">\(unordered\_map\)</span>，不然会<span class="math inline">\(\text{T}\)</span>，或者离散化一下也可以。</p><h3 id="代码">代码</h3><p>我的<span class="math inline">\(\text{AC}\)</span></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"bits/stdc++.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,q;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; l,r,f;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt;<span class="string">'9'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>) &#123;</span><br><span class="line">        x = x * <span class="number">10</span> + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//路径压缩</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cr</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t = x;</span><br><span class="line">    <span class="keyword">while</span> (r[t] != t)&#123;</span><br><span class="line">        t = r[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (r[x] != t)&#123;</span><br><span class="line">        <span class="keyword">int</span> p = r[x];</span><br><span class="line">        r[x] = t;</span><br><span class="line">        x = p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = read(), q = read();</span><br><span class="line">    <span class="keyword">int</span> op,x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; q;i++) &#123;</span><br><span class="line">        op = read(), x = read();</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(f.count(x)) <span class="keyword">continue</span>;</span><br><span class="line">            f[x] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(l.count(x - <span class="number">1</span>) &amp;&amp; l.count(x + <span class="number">1</span>)) &#123;</span><br><span class="line">                l[x] = l[x - <span class="number">1</span>];</span><br><span class="line">                r[x] = r[x + <span class="number">1</span>];</span><br><span class="line">                r[x - <span class="number">1</span>] = r[x];</span><br><span class="line">                l[x + <span class="number">1</span>] = l[x];</span><br><span class="line">                r[l[x]] = r[x];</span><br><span class="line">                l[r[x]] = l[x];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(l.count(x - <span class="number">1</span>)) &#123;</span><br><span class="line">                l[x] = l[x - <span class="number">1</span>];</span><br><span class="line">                r[x - <span class="number">1</span>] = x;</span><br><span class="line">                r[l[x]] = r[x] = x;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(l.count(x + <span class="number">1</span>)) &#123;</span><br><span class="line">                r[x] = r[x + <span class="number">1</span>];</span><br><span class="line">                l[x + <span class="number">1</span>] = x;</span><br><span class="line">                l[r[x]] = l[x] = x;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                l[x] = r[x] = x;</span><br><span class="line">            &#125;</span><br><span class="line">            cr(x);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(!l.count(x)) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,x);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> t = x;</span><br><span class="line">                <span class="keyword">while</span>(r[t] != t) t = r[t];</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,t + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><span class="math inline">\(大佬的\text{AC}\)</span></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span>  <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>  <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span>  <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span>  <span class="keyword">int</span> maxn =  <span class="number">100010</span>;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,  <span class="keyword">int</span>&gt; fa;</span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">findfa</span><span class="params">(<span class="keyword">int</span>  x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>  (!fa.count(x))<span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">return</span>  fa[x]  =  findfa(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> n, q;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d  %d"</span>,  &amp;n,  &amp;q);</span><br><span class="line"><span class="keyword">int</span> op, x;</span><br><span class="line"><span class="keyword">while</span>  (q--)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d  %d"</span>,  &amp;op,  &amp;x);</span><br><span class="line"><span class="keyword">if</span>  (op ==  <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">fa[x]  =  findfa(x +  <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> ans =  findfa(x);</span><br><span class="line"><span class="keyword">if</span>  (ans &gt; n)ans =  <span class="number">-1</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;链接&quot;&gt;链接&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://nanti.jisuanke.com/t/41384&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;math inline&quot;&gt;\(\text{2019徐州网络赛-B.so easy}\)&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题意&quot;&gt;题意&lt;/h3&gt;
&lt;p&gt;  现在，从下标1开始每个位置有一个点，需要你进行&lt;span class=&quot;math inline&quot;&gt;\(q\)&lt;/span&gt;次操作，共两种，1. &lt;span class=&quot;math inline&quot;&gt;\((1,x)\)&lt;/span&gt;为删除&lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt;位置的点，2. &lt;span class=&quot;math inline&quot;&gt;\((2,x)\)&lt;/span&gt;为查询&lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt;的后面(包括&lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt;位置)的第一个点的位置。&lt;/p&gt;
&lt;p&gt;  输入格式：第一行输入两个数&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;和&lt;span class=&quot;math inline&quot;&gt;\(q\)&lt;/span&gt;，之后&lt;span class=&quot;math inline&quot;&gt;\(q\)&lt;/span&gt;行每行一个操作。&lt;/p&gt;
&lt;p&gt;  数据范围：&lt;span class=&quot;math inline&quot;&gt;\(1\leq x&amp;lt; n&amp;lt;10^9,1\leq q&amp;lt;10^6\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;  输出格式：对于每个查询操作，输出一行一个结果。
    
    </summary>
    
      <category term="算法" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="并查集" scheme="https://yuggu.github.io/categories/%E7%AE%97%E6%B3%95/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
    
      <category term="并查集" scheme="https://yuggu.github.io/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
  </entry>
  
</feed>
